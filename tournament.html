<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Tournaments - TourneyHub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C63FF;
            --primary-dark: #5A52D5;
            --primary-light: #8B85FF;
            --secondary: #FF6584;
            --accent: #36D1DC;
            --success: #4CD964;
            --warning: #FF9F43;
            --error: #FF5252;
            --dark: #0F0F1B;
            --darker: #090914;
            --dark-card: #1A1A2E;
            --light: #FFFFFF;
            --gray: #8B8B9E;
            --gray-dark: #5A5A6E;
            --card-bg: rgba(26, 26, 46, 0.8);
            --card-border: rgba(108, 99, 255, 0.2);
            --gradient-primary: linear-gradient(135deg, var(--primary), var(--accent));
            --gradient-secondary: linear-gradient(135deg, var(--secondary), var(--warning));
            --gradient-dark: linear-gradient(135deg, var(--darker), var(--dark));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: var(--gradient-dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Particle Background */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            background: var(--primary);
            opacity: 0.1;
            animation: float 15s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-20px) translateX(10px); }
            100% { transform: translateY(0) translateX(0); }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-content {
            text-align: center;
            position: relative;
        }

        .loading-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 30px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-subtitle {
            color: var(--gray);
            font-weight: 500;
        }

        /* Header */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 15, 27, 0.9);
            backdrop-filter: blur(15px);
            z-index: 1000;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .main-header.scrolled {
            background: rgba(15, 15, 27, 0.95);
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 18px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.6rem;
            font-weight: 800;
            text-decoration: none;
            color: var(--light);
            transition: transform 0.3s;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-icon {
            font-size: 2rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-nav {
            display: flex;
            gap: 32px;
        }

        .nav-link {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            position: relative;
            padding: 8px 0;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link.active {
            color: var(--primary);
            font-weight: 600;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        .auth-buttons {
            display: flex;
            gap: 16px;
        }

        /* User Profile in Header */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 12px;
            transition: all 0.3s;
            position: relative;
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-balance {
            font-size: 0.8rem;
            color: var(--success);
            font-weight: 500;
        }

        /* Dropdown Menu */
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--dark-card);
            border-radius: 12px;
            padding: 8px;
            min-width: 200px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 8px;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .dropdown-item i {
            width: 16px;
            text-align: center;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(108, 99, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            color: var(--light);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .btn-sm {
            padding: 10px 18px;
            font-size: 0.85rem;
            border-radius: 10px;
        }

        .btn-register {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }

        .btn-register:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(108, 99, 255, 0.4);
        }

        .btn-register:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-details {
            background: rgba(255, 255, 255, 0.08);
            color: var(--light);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-details:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }

        .btn-icon {
            font-size: 0.9rem;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            min-height: 70vh;
            padding: 140px 16px 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            overflow: hidden;
        }

        .hero-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(108, 99, 255, 0.15) 0%, transparent 70%);
            z-index: -1;
        }

        .hero-container {
            max-width: 850px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.08);
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 0.95rem;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.8s ease;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            line-height: 1.1;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .gradient-text {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-description {
            font-size: 1.3rem;
            color: var(--gray);
            margin-bottom: 40px;
            line-height: 1.6;
            animation: fadeInUp 0.8s ease 0.4s both;
        }

        .hero-actions {
            display: flex;
            gap: 18px;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 0.8s ease 0.6s both;
        }

        /* Trending Section */
        .trending-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .section-header.center {
            justify-content: center;
            text-align: center;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 2rem;
            font-weight: 700;
        }

        .fire-icon {
            color: var(--warning);
            font-size: 1.8rem;
        }

        .section-subtitle {
            color: var(--gray);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .tab-bar {
            display: flex;
            gap: 8px;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px;
            border-radius: 14px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: var(--light);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .tab.active {
            background: var(--gradient-primary);
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }

        .tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.08);
        }

        .live-pulse {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px var(--success);
        }

        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(0.95); opacity: 1; }
        }

        /* Tournaments Grid */
        .tournaments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 30px;
        }

        .tournament-card {
            background: var(--card-bg);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            border: 1px solid var(--card-border);
            backdrop-filter: blur(10px);
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .tournament-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }

        .tournament-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(108, 99, 255, 0.4);
        }

        .tournament-card:hover::before {
            transform: scaleX(1);
        }

        .tournament-card.featured {
            border: 2px solid var(--warning);
            position: relative;
        }

        .tournament-card.featured::after {
            content: 'FEATURED';
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--gradient-secondary);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            z-index: 2;
            box-shadow: 0 4px 10px rgba(255, 101, 132, 0.3);
        }

        .tournament-header {
            padding: 25px 25px 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .tournament-game {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .game-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: rgba(108, 99, 255, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 1px solid rgba(108, 99, 255, 0.2);
        }

        .game-info {
            display: flex;
            flex-direction: column;
        }

        .game-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .game-category {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .tournament-status {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active {
            background: rgba(76, 217, 100, 0.15);
            color: var(--success);
            border: 1px solid rgba(76, 217, 100, 0.3);
        }

        .status-upcoming {
            background: rgba(255, 159, 67, 0.15);
            color: var(--warning);
            border: 1px solid rgba(255, 159, 67, 0.3);
        }

        .status-registering {
            background: rgba(108, 99, 255, 0.15);
            color: var(--primary);
            border: 1px solid rgba(108, 99, 255, 0.3);
        }

        .status-completed {
            background: rgba(139, 139, 158, 0.15);
            color: var(--gray);
            border: 1px solid rgba(139, 139, 158, 0.3);
        }

        .tournament-body {
            padding: 20px 25px;
        }

        .tournament-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .tournament-body p {
            color: var(--gray);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .tournament-details {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .tournament-detail {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
        }

        .detail-icon {
            width: 24px;
            text-align: center;
            color: var(--primary);
        }

        .tournament-prize {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(76, 217, 100, 0.1);
            padding: 14px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-weight: 600;
            border: 1px solid rgba(76, 217, 100, 0.2);
        }

        .prize-icon {
            color: var(--success);
            font-size: 1.2rem;
        }

        .tournament-progress {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            transition: width 0.8s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            font-size: 0.85rem;
            color: var(--gray);
            text-align: right;
        }

        .tournament-footer {
            padding: 20px 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tournament-entries {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .entries-icon {
            color: var(--gray);
        }

        .entries-count {
            font-weight: 700;
            color: var(--light);
        }

        .tournament-actions {
            display: flex;
            gap: 12px;
        }

        /* Features Section (for no tournaments message) */
        .features-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 20px;
            text-align: center;
        }

        .feature-icon {
            font-size: 5rem;
            margin-bottom: 25px;
            opacity: 0.7;
        }

        /* Loading States */
        .loading-tournaments {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 20px;
            color: var(--gray);
        }

        .error-state {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 20px;
            color: var(--error);
            text-align: center;
        }

        .error-state i {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .error-state h3 {
            margin-bottom: 10px;
        }

        /* Game Filter Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(9, 9, 20, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            padding: 20px;
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .game-filter-modal {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .game-filter-modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.08);
            border: none;
            color: var(--light);
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.12);
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .game-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .game-option:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-3px);
        }

        .game-option.active {
            background: var(--gradient-primary);
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 15, 27, 0.9);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            z-index: 1000;
            backdrop-filter: blur(15px);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            color: var(--gray);
            font-size: 0.8rem;
            transition: color 0.3s;
            padding: 8px 12px;
            border-radius: 12px;
            position: relative;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: var(--primary);
            border-radius: 50%;
        }

        .nav-icon {
            font-size: 1.3rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-nav, .auth-buttons {
                display: none;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .hero-description {
                font-size: 1.1rem;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .tab-bar {
                width: 100%;
                justify-content: space-between;
                overflow-x: auto;
            }

            .tournaments-grid {
                grid-template-columns: 1fr;
            }

            .hero-actions {
                flex-direction: column;
                align-items: center;
            }

            .hero-actions .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .games-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (min-width: 769px) {
            .bottom-nav {
                display: none;
            }
        }
    </style>
</head>
<body class="no-select">
    <!-- Particle Background -->
    <div class="particles-container" id="particlesContainer"></div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-logo">
                <span class="logo-icon">‚öîÔ∏è</span>
                <span class="logo-text">TourneyHub</span>
            </div>
            <div class="loading-spinner"></div>
            <p class="loading-subtitle">Loading Tournaments...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="main-header" id="mainHeader">
        <div class="header-container">
            <a href="index.html" class="logo">
                <span class="logo-icon">üèÜ</span>
                <span class="logo-text">TourneyHub</span>
            </a>
            
            <nav class="header-nav">
                <a href="tournaments.html" class="nav-link active">Tournaments</a>
                <a href="games.html" class="nav-link">Games</a>
                <a href="leaderboards.html" class="nav-link">Leaderboards</a>
                <a href="how-to-play.html" class="nav-link">How to Play</a>
            </nav>
            
            <div class="auth-buttons" id="authButtons">
                <a href="login.html" class="btn btn-secondary">Login</a>
                <a href="register.html" class="btn btn-primary">Sign Up</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-glow"></div>
        <div class="hero-container">
            <div class="hero-badge">
                <span>‚öîÔ∏è</span>
                <span id="pageSubtitle">Premium Tournaments</span>
            </div>
            <h1 class="hero-title" id="pageTitle">Compete & <span class="gradient-text">Win Big</span></h1>
            <p class="hero-description" id="pageDescription">Join officially organized tournaments with verified prize pools. Show off your skills and climb the leaderboards.</p>
            
            <div class="hero-actions">
                <button class="btn btn-primary" onclick="filterTournaments('all')">
                    <span class="btn-icon">üî•</span>
                    All Tournaments
                </button>
                <button class="btn btn-secondary" onclick="showGameFilter()">
                    <span class="btn-icon">üéÆ</span>
                    Filter by Game
                </button>
            </div>
        </div>
    </section>

    <!-- Tournaments Section -->
    <section class="trending-section">
        <div class="section-header">
            <h2 class="section-title">
                <span class="fire-icon">‚ö°</span>
                <span id="sectionTitle">Live Tournaments</span>
            </h2>
            <div class="tab-bar">
                <button class="tab active" onclick="filterByStatus('all')">All</button>
                <button class="tab" onclick="filterByStatus('active')">
                    <span class="live-pulse"></span>
                    Live Now
                </button>
                <button class="tab" onclick="filterByStatus('upcoming')">Upcoming</button>
                <button class="tab" onclick="filterByStatus('registering')">Registering</button>
            </div>
        </div>
        
        <div class="tournaments-grid" id="tournamentsList">
            <div class="loading-tournaments">
                <div class="loading-spinner"></div>
                <p>Loading premium tournaments...</p>
            </div>
        </div>
    </section>

    <!-- No Tournaments Message -->
    <div id="noTournamentsMessage" class="features-section" style="display: none;">
        <div class="section-header center">
            <div class="feature-icon">‚è∞</div>
            <h2 class="section-title">No Tournaments Available</h2>
            <p class="section-subtitle" id="noTournamentsText">There are no tournaments available at the moment. Check back later for new competitions.</p>
            <div class="hero-actions">
                <a href="games.html" class="btn btn-primary">
                    <span class="btn-icon">üéÆ</span>
                    Browse All Games
                </a>
            </div>
        </div>
    </div>

    <!-- Game Filter Modal -->
    <div class="modal-overlay" id="gameFilterModal">
        <div class="game-filter-modal">
            <div class="modal-header">
                <h3 class="modal-title">Filter by Game</h3>
                <button class="modal-close" onclick="hideGameFilter()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="games-grid">
                <div class="game-option active" data-game="all" onclick="filterTournaments(this.dataset.game)">All Games</div>
                <div class="game-option" data-game="BGMI" onclick="filterTournaments(this.dataset.game)">BGMI</div>
                <div class="game-option" data-game="Free Fire" onclick="filterTournaments(this.dataset.game)">Free Fire</div>
                <div class="game-option" data-game="Call of Duty" onclick="filterTournaments(this.dataset.game)">Call of Duty</div>
                <div class="game-option" data-game="Clash Royale" onclick="filterTournaments(this.dataset.game)">Clash Royale</div>
                <div class="game-option" data-game="8 Ball Pool" onclick="filterTournaments(this.dataset.game)">8 Ball Pool</div>
                <div class="game-option" data-game="Valorant" onclick="filterTournaments(this.dataset.game)">Valorant</div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="tournaments.html" class="nav-item active">
            <span class="nav-icon">‚öîÔ∏è</span>
            <span class="nav-text">Tourneys</span>
        </a>
        <a href="games.html" class="nav-item">
            <span class="nav-icon">üéÆ</span>
            <span class="nav-text">Games</span>
        </a>
        <a href="index.html" class="nav-item">
            <span class="nav-icon">üè†</span>
            <span class="nav-text">Home</span>
        </a>
        <a href="wallet.html" class="nav-item">
            <span class="nav-icon">üí∞</span>
            <span class="nav-text">Wallet</span>
        </a>
        <a href="dashboard.html" class="nav-item">
            <span class="nav-icon">üëë</span>
            <span class="nav-text">Pro</span>
        </a>
    </nav>

    <!-- Firebase & JavaScript -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA7QsyV2yb4f_acY9ETQnTSna7YHxwOJw4",
            authDomain: "authapp-386ee.firebaseapp.com",
            projectId: "authapp-386ee",
            storageBucket: "authapp-386ee.appspot.com",
            messagingSenderId: "809698525310",
            appId: "1:809698525310:web:5cb7de80bde9ed1f26982f",
            measurementId: "G-EJZTSBSGQT"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const selectedGame = urlParams.get('game');
        let currentFilter = selectedGame || 'all';
        let currentStatus = 'all';
        let globalTournamentCache = [];
        let isUserAuthenticated = false; // Tracks auth state

        // --- AUTHENTICATION STATE HANDLER ---
        auth.onAuthStateChanged((user) => {
            isUserAuthenticated = !!user;
            updateAuthButtons(user);
        });

        function updateAuthButtons(user) {
            const authContainer = document.getElementById('authButtons');
            if (!authContainer) return;

            if (user) {
                authContainer.innerHTML = `
                    <div class="user-profile" id="userProfileHeader">
                        <div class="user-avatar">${user.email[0].toUpperCase()}</div>
                        <div class="user-info">
                            <div class="user-name">${user.email.split('@')[0]}</div>
                            <div class="user-balance">Wallet: N/A</div>
                        </div>
                        <div class="dropdown-menu">
                            <a href="dashboard.html" class="dropdown-item"><i class="fas fa-user-circle"></i> Dashboard</a>
                            <a href="wallet.html" class="dropdown-item"><i class="fas fa-wallet"></i> Wallet</a>
                            <a href="#" class="dropdown-item" onclick="signOut()"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
                        </div>
                    </div>
                `;
                document.getElementById('userProfileHeader').addEventListener('click', (e) => {
                    e.stopPropagation();
                    document.querySelector('.dropdown-menu').classList.toggle('active');
                });
                document.addEventListener('click', () => {
                    document.querySelector('.dropdown-menu')?.classList.remove('active');
                });
            } else {
                authContainer.innerHTML = `
                    <a href="login.html" class="btn btn-secondary">Login</a>
                    <a href="register.html" class="btn btn-primary">Sign Up</a>
                `;
            }
        }
        
        function signOut() {
            auth.signOut().then(() => {
                location.reload(); // Refresh page to update UI
            });
        }

        // --- PARTICLE BACKGROUND ---
        function createParticles() {
            const container = document.getElementById('particlesContainer');
            if (!container) return;
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                const size = Math.random() * 5 + 3;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 15}s`;
                const colors = ['#6C63FF', '#FF6584', '#36D1DC', '#4CD964', '#FF9F43'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.background = color;
                container.appendChild(particle);
            }
        }

        // --- PAGE UI UPDATES ---
        function updatePageForGame(game) {
            const subtitleEl = document.getElementById('pageSubtitle');
            const titleEl = document.getElementById('pageTitle');
            const descEl = document.getElementById('pageDescription');
            const sectionTitleEl = document.getElementById('sectionTitle');
            const modalOptions = document.querySelectorAll('.game-option');

            if (game && game !== 'all') {
                subtitleEl.textContent = `${game} Premium Tournaments`;
                titleEl.innerHTML = `${game} <span class="gradient-text">Tournaments</span>`;
                descEl.textContent = `Premium ${game} tournaments with verified prize pools. Compete against the best players.`;
                sectionTitleEl.textContent = `${game} Tournaments`;
            } else {
                subtitleEl.textContent = 'Premium Tournaments';
                titleEl.innerHTML = 'Compete & <span class="gradient-text">Win Big</span>';
                descEl.textContent = 'Join officially organized tournaments with verified prize pools. Show off your skills and climb the leaderboards.';
                sectionTitleEl.textContent = 'Live Tournaments';
            }

            // Update modal active state
            modalOptions.forEach(option => {
                option.classList.remove('active');
                if (option.dataset.game === game) {
                    option.classList.add('active');
                }
            });
        }

        // --- FIREBASE DATA LOADERS ---
        async function loadTournaments() {
            const container = document.getElementById('tournamentsList');
            if (container) {
                container.innerHTML = `<div class="loading-tournaments"><div class="loading-spinner"></div><p>Loading premium tournaments...</p></div>`;
            }
            
            try {
                const snapshot = await db.collection('tournaments')
                    .orderBy('startDate', 'asc') // Sort by upcoming date
                    .get();
                
                globalTournamentCache = [];
                
                snapshot.forEach(doc => {
                    const tournament = {
                        id: doc.id,
                        ...doc.data()
                    };
                    // Only display tournaments created by 'admin'
                    if (!tournament.createdBy || tournament.createdBy === 'admin') {
                        globalTournamentCache.push(tournament);
                    }
                });
                
                // Now apply filters
                filterAndDisplayTournaments();
                
            } catch (error) {
                console.error('Error loading tournaments:', error);
                if (container) {
                    container.innerHTML = `<div class="error-state"><i class="fas fa-exclamation-triangle"></i><h3>Failed to Load</h3><p>Could not connect to the server.</p></div>`;
                }
            }
        }
        
        function filterAndDisplayTournaments() {
            let tournaments = globalTournamentCache.filter(tournament => {
                // 1. Game filter
                if (currentFilter !== 'all' && tournament.game !== currentFilter) {
                    return false;
                }
                
                // 2. Status filter
                if (currentStatus !== 'all') {
                    return tournament.status === currentStatus;
                } else {
                    // Default to showing only visible statuses if 'all' is selected
                    return ['active', 'upcoming', 'registering'].includes(tournament.status);
                }
            });
            
            displayTournaments(tournaments);
        }
        
        function displayTournaments(tournaments) {
            const container = document.getElementById('tournamentsList');
            const noTournamentsMsg = document.getElementById('noTournamentsMessage');
            const noTournamentsText = document.getElementById('noTournamentsText');
            
            if (!container || !noTournamentsMsg) return;
            
            if (tournaments.length === 0) {
                container.style.display = 'none';
                noTournamentsMsg.style.display = 'block';
                
                let message = 'No tournaments match your current filter.';
                if (currentFilter !== 'all') {
                    message = `No active ${currentFilter} tournaments at the moment.`;
                } else if (currentStatus !== 'all') {
                    message = `No tournaments currently marked as '${currentStatus.toUpperCase()}'.`;
                }
                noTournamentsText.textContent = message;
                
                return;
            }
            
            container.style.display = 'grid';
            noTournamentsMsg.style.display = 'none';
            
            container.innerHTML = tournaments.map(tournament => {
                const isRegistering = tournament.status === 'registering';
                const buttonText = isRegistering && isUserAuthenticated ? 'Register Now' : 
                                   isRegistering && !isUserAuthenticated ? 'Login to Register' : 
                                   'View Details';
                const buttonClass = isRegistering ? 'btn-register' : 'btn-details';
                const buttonAction = isRegistering ? 
                    `registerForTournament('${tournament.id}')` : 
                    `viewTournamentDetails('${tournament.id}')`;

                return `
                <div class="tournament-card ${tournament.featured ? 'featured' : ''} fade-in">
                    <div class="tournament-header">
                        <div class="tournament-game">
                            <div class="game-icon">
                                ${getGameIcon(tournament.game)}
                            </div>
                            <div class="game-info">
                                <div class="game-name">${tournament.game || 'General'}</div>
                                <div class="game-category">Premium Tournament</div>
                            </div>
                        </div>
                        <div class="tournament-status status-${tournament.status || 'upcoming'}">
                            ${(tournament.status || 'UPCOMING').toUpperCase()}
                        </div>
                    </div>
                    
                    <div class="tournament-body">
                        <h3 class="tournament-title">${tournament.title || 'Premium Tournament'}</h3>
                        <p>${(tournament.description || 'Verified prize pool. Compete against top players.').substring(0, 100)}...</p>
                        
                        <div class="tournament-details">
                            <div class="tournament-detail">
                                <span class="detail-icon">üí∞</span>
                                <span>‚Çπ${tournament.entryFee || 0} Entry Fee</span>
                            </div>
                            <div class="tournament-detail">
                                <span class="detail-icon">‚è∞</span>
                                <span>${formatDate(tournament.startDate)}</span>
                            </div>
                            <div class="tournament-detail">
                                <span class="detail-icon">üë•</span>
                                <span>${tournament.maxPlayers || '‚àû'} Players Max</span>
                            </div>
                        </div>
                        
                        <div class="tournament-prize">
                            <span class="prize-icon">üèÜ</span>
                            ‚Çπ${tournament.prizePool || 0} Prize Pool
                        </div>
                        
                        <div class="tournament-progress">
                            ${tournament.maxPlayers ? `
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${((tournament.currentPlayers || 0) / tournament.maxPlayers) * 100}%"></div>
                            </div>
                            <div class="progress-text">${tournament.currentPlayers || 0} / ${tournament.maxPlayers} Spots Filled</div>
                            ` : ''}
                        </div>
                    </div>
                    
                    <div class="tournament-footer">
                        <div class="tournament-entries">
                            <span class="entries-icon">üíµ</span>
                            <span class="entries-count">Entry: ‚Çπ${tournament.entryFee || 0}</span>
                        </div>
                        <div class="tournament-actions">
                            <button class="btn-sm ${buttonClass}" onclick="${buttonAction}">
                                ${buttonText}
                            </button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }
        
        // --- FILTER HANDLERS ---
        function filterTournaments(game) {
            currentFilter = game;
            updatePageForGame(game);
            filterAndDisplayTournaments();
            hideGameFilter();
            
            // Update URL without page reload
            const newUrl = game === 'all' ? 'tournaments.html' : `tournaments.html?game=${encodeURIComponent(game)}`;
            window.history.replaceState({}, '', newUrl);
        }
        
        function filterByStatus(status) {
            currentStatus = status;
            
            // Update tab active states
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector(`.tab[onclick="filterByStatus('${status}')"]`)?.classList.add('active');
            
            filterAndDisplayTournaments();
        }
        
        // --- MODAL HANDLERS ---
        function showGameFilter() {
            document.getElementById('gameFilterModal').classList.add('active');
        }
        
        function hideGameFilter() {
            document.getElementById('gameFilterModal').classList.remove('active');
        }
        
        // --- REGISTRATION ACTIONS ---
        function registerForTournament(tournamentId) {
            if (!isUserAuthenticated) {
                alert('Please log in to register for tournaments.');
                window.location.href = 'login.html';
                return;
            }
            
            // Redirect to the dedicated registration page
            window.location.href = `tournament-register.html?id=${tournamentId}`;
        }
        
        function viewTournamentDetails(tournamentId) {
            window.location.href = `tournament-details.html?id=${tournamentId}`;
        }

        // --- UTILITY ---
        function getGameIcon(gameName) {
            const icons = {
                'BGMI': 'üì±',
                'Free Fire': 'üî•',
                'Call of Duty': 'üéØ',
                'Clash Royale': 'üëë',
                '8 Ball Pool': 'üé±',
                'Valorant': 'üé≠'
            };
            return icons[gameName] || 'üéÆ';
        }
        
        function formatDate(timestamp) {
            if (!timestamp) return 'TBD';
            try {
                let date;
                if (timestamp.toDate) {
                    date = timestamp.toDate();
                } else if (typeof timestamp === 'string') {
                    date = new Date(timestamp);
                } else if (timestamp.seconds) {
                    date = new Date(timestamp.seconds * 1000);
                } else {
                    return 'TBD';
                }
                return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            } catch (e) {
                return 'TBD';
            }
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            updatePageForGame(currentFilter);
            
            // Apply initial URL filter state to the status tabs
            if (currentFilter !== 'all') {
                document.querySelector('.tab[onclick="filterByStatus(\'all\')"]')?.classList.remove('active');
                document.querySelector('.tab[onclick="filterByStatus(\'registering\')"]')?.classList.add('active');
                currentStatus = 'registering'; // Default to registering if game specific filter is applied
            }
            
            // Enhanced loading screen removal
            setTimeout(() => {
                document.getElementById('loadingScreen')?.classList.add('hidden');
            }, 500);

            loadTournaments();
            
            // Header scroll effect
            const header = document.getElementById('mainHeader');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    header?.classList.add('scrolled');
                } else {
                    header?.classList.remove('scrolled');
                }
            });
            
            // Close game filter when clicking outside modal
            document.addEventListener('click', function(e) {
                const modal = document.getElementById('gameFilterModal');
                if (modal && e.target === modal) {
                    hideGameFilter();
                }
            });
            
            // Initialize modal state based on URL
            updatePageForGame(currentFilter);
        });

        // Set up real-time listener after initial load
        db.collection('tournaments').onSnapshot((snapshot) => {
            console.log('Real-time update: Tournaments changed');
            loadTournaments();
        });
    </script>
</body>
</html>