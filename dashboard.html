
<!DOCTYPE html><html lang="en" class="no-js"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"> <title>TourneyHub Pro | Gaming Tournament Dashboard</title> <meta name="description" content="Advanced gaming tournament dashboard with real-time stats, wallet management, and tournament tracking"> <meta name="theme-color" content="#0f0f23">
<!-- Preload critical resources -->
<link rel="preload" href="dashboard.css" as="style">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="preconnect" href="https://www.gstatic.com">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght=300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- CSS -->
<link rel="stylesheet" href="dashboard.css">

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ®</text></svg>">

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json">

<!-- Dashboard Styles -->
<style>
    /* Dashboard specific styles */
    .dashboard-container {
        position: relative;
        min-height: 100vh;
        background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
        overflow-x: hidden;
    }

    /* Loading Screen */
    .loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.3s ease;
    }

    .loading-content {
        text-align: center;
        max-width: 400px;
        padding: 2rem;
    }

    .loading-logo {
        margin-bottom: 2rem;
    }

    .logo-icon {
        width: 4rem;
        height: 4rem;
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
    }

    .loading-spinner {
        width: 4rem;
        height: 4rem;
        border: 4px solid rgba(99, 102, 241, 0.3);
        border-top-color: #6366f1;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    .loading-subtitle {
        color: #9ca3af;
        margin-top: 1rem;
        font-size: 0.875rem;
    }

    /* Header */
    .dashboard-header {
        background: rgba(15, 15, 35, 0.9);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .header-left {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .logo {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
        color: white;
        font-weight: 700;
        font-size: 1.25rem;
    }

    .logo-icon {
        width: 2.5rem;
        height: 2.5rem;
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .logo-text {
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .header-right {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .user-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .user-avatar {
        position: relative;
    }

    .user-avatar img {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        border: 2px solid rgba(99, 102, 241, 0.3);
    }

    .user-avatar .status-indicator {
        position: absolute;
        bottom: 0;
        right: 0;
        width: 0.75rem;
        height: 0.75rem;
        background: #10b981;
        border-radius: 50%;
        border: 2px solid #1a1a2e;
    }

    .user-details {
        display: none;
    }

    @media (min-width: 768px) {
        .user-details {
            display: block;
        }
    }

    .user-name {
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
    }

    .user-email {
        color: #9ca3af;
        font-size: 0.75rem;
    }

    /* Buttons */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-weight: 500;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
        outline: none;
    }

    .btn-primary {
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        color: white;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .btn-secondary {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .btn-secondary:hover {
        background: rgba(255, 255, 255, 0.15);
    }

    .btn-ghost {
        background: transparent;
        color: #9ca3af;
    }

    .btn-ghost:hover {
        color: white;
        background: rgba(255, 255, 255, 0.05);
    }

    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.75rem;
    }

    /* Quick Stats */
    .quick-stats-bar {
        padding: 1rem;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .stats-scroll-container {
        display: flex;
        gap: 0.75rem;
        min-width: max-content;
    }

    .stat-chip {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        padding: 0.75rem;
        min-width: 120px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .stat-chip:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
    }

    .stat-chip.active {
        background: rgba(99, 102, 241, 0.2);
        border-color: rgba(99, 102, 241, 0.5);
    }

    /* Main Stats Grid */
    .stats-section {
        padding: 1rem;
    }

    .section-title {
        color: white;
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 1rem;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
        transition: all 0.2s ease;
        cursor: pointer;
    }

    .stat-card:hover {
        background: rgba(255, 255, 255, 0.08);
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    .stat-icon {
        margin-bottom: 1rem;
    }

    .stat-number {
        color: white;
        font-size: 2rem;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 0.25rem;
    }

    .stat-label {
        color: #9ca3af;
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
    }

    .stat-trend {
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    /* Quick Actions */
    .quick-actions {
        padding: 1rem;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .actions-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 0.75rem;
    }

    @media (max-width: 640px) {
        .actions-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .action-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem 1rem;
        text-align: center;
        transition: all 0.2s ease;
        cursor: pointer;
        text-decoration: none;
        color: inherit;
    }

    .action-card:hover {
        background: rgba(255, 255, 255, 0.08);
        transform: translateY(-2px);
    }

    .action-icon {
        margin-bottom: 0.75rem;
    }

    .action-text {
        color: white;
        font-size: 0.875rem;
        margin-bottom: 0.25rem;
    }

    .action-subtext {
        color: #9ca3af;
        font-size: 0.75rem;
    }

    /* Tab Navigation */
    .tab-section {
        padding: 0 1rem;
        margin-top: 1rem;
    }

    .tab-navigation {
        position: relative;
    }

    .tab-list {
        display: flex;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        padding: 0.25rem;
    }

    .tab {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.75rem;
        background: transparent;
        border: none;
        border-radius: 0.5rem;
        color: #9ca3af;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        outline: none;
    }

    .tab.active {
        background: rgba(99, 102, 241, 0.2);
        color: white;
    }

    .tab:hover:not(.active) {
        background: rgba(255, 255, 255, 0.05);
        color: white;
    }

    .mobile-tab-indicator {
        position: absolute;
        bottom: -4px;
        height: 3px;
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        border-radius: 3px;
        transition: all 0.3s ease;
        opacity: 0;
    }

    /* Tab Content */
    .tab-content-area {
        padding: 1rem;
    }

    .tab-panel {
        display: none;
        animation: fadeIn 0.3s ease;
    }

    .tab-panel.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    /* Tournaments List */
    .tournaments-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .tournament-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
        transition: all 0.2s ease;
        cursor: pointer;
    }

    .tournament-card:hover {
        background: rgba(255, 255, 255, 0.08);
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    .tournament-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .tournament-game {
        color: #9ca3af;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .tournament-title {
        color: white;
        font-size: 1.125rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .tournament-description {
        color: #9ca3af;
        font-size: 0.875rem;
        margin-bottom: 1rem;
        line-height: 1.5;
    }

    .tournament-details {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 1rem;
    }

    .detail {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #9ca3af;
        font-size: 0.875rem;
    }

    .tournament-footer {
        display: flex;
        gap: 0.75rem;
    }

    .btn-outline {
        background: transparent;
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .btn-outline:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    /* Matches List */
    .matches-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .match-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
        transition: all 0.2s ease;
    }

    .match-card:hover {
        background: rgba(255, 255, 255, 0.08);
        transform: translateY(-2px);
    }

    .match-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .match-time {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #9ca3af;
        font-size: 0.875rem;
    }

    .match-body {
        margin-bottom: 1rem;
    }

    .match-teams {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 1rem;
    }

    .team {
        text-align: center;
    }

    .team-name {
        color: white;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .team-score {
        font-size: 1.5rem;
        font-weight: 800;
        color: white;
    }

    .team-score.winner {
        color: #10b981;
    }

    .vs {
        color: #9ca3af;
        font-weight: 700;
    }

    .match-tournament {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        color: #9ca3af;
        font-size: 0.875rem;
    }

    .match-footer {
        display: flex;
        gap: 0.75rem;
    }

    /* Wallet Content */
    .wallet-content {
        max-width: 800px;
        margin: 0 auto;
    }

    .wallet-card {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
        border: 1px solid rgba(99, 102, 241, 0.2);
        border-radius: 1.5rem;
        padding: 2rem;
        margin-bottom: 2rem;
    }

    .wallet-balance {
        text-align: center;
    }

    .balance-label {
        color: #9ca3af;
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
    }

    .balance-amount {
        color: white;
        margin-bottom: 0.25rem;
    }

    .balance-subtitle {
        color: #9ca3af;
        font-size: 0.875rem;
    }

    .wallet-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
    }

    .quick-wallet-actions {
        margin-bottom: 2rem;
    }

    .wallet-action-btn {
        background: transparent;
        border: none;
        color: white;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s ease;
        padding: 0.5rem;
        border-radius: 0.75rem;
    }

    .wallet-action-btn:hover {
        background: rgba(255, 255, 255, 0.05);
        transform: translateY(-2px);
    }

    .transaction-history {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
    }

    .transactions-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .transaction-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.02);
        border-radius: 0.75rem;
        transition: all 0.2s ease;
        cursor: pointer;
    }

    .transaction-item:hover {
        background: rgba(255, 255, 255, 0.05);
    }

    .transaction-icon {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
    }

    .transaction-details {
        flex: 1;
    }

    .transaction-title {
        color: white;
        font-weight: 500;
        margin-bottom: 0.25rem;
    }

    .transaction-meta {
        display: flex;
        gap: 1rem;
        font-size: 0.75rem;
        color: #9ca3af;
    }

    .transaction-amount {
        font-weight: 700;
        font-size: 1rem;
    }

    /* Profile Content */
    .profile-content {
        max-width: 800px;
        margin: 0 auto;
    }

    .profile-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1.5rem;
        padding: 2rem;
        margin-bottom: 1.5rem;
    }

    .profile-avatar-large {
        position: relative;
        width: 6rem;
        height: 6rem;
        margin: 0 auto 1rem;
    }

    .profile-avatar-large img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 4px solid rgba(99, 102, 241, 0.3);
        object-fit: cover;
    }

    .profile-info {
        text-align: center;
        margin-bottom: 1.5rem;
    }

    .profile-badges {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 1rem;
    }

    .badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 500;
        border: 1px solid;
    }

    .badge.verified {
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
        border-color: rgba(16, 185, 129, 0.3);
    }

    .badge.member {
        background: rgba(99, 102, 241, 0.2);
        color: #6366f1;
        border-color: rgba(99, 102, 241, 0.3);
    }

    .profile-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin: 1.5rem 0;
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.02);
        border-radius: 1rem;
    }

    .profile-stat {
        text-align: center;
    }

    .stat-value {
        color: white;
        font-weight: 800;
    }

    .profile-actions {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
    }

    @media (min-width: 640px) {
        .profile-actions {
            grid-template-columns: repeat(4, 1fr);
        }
    }

    .additional-profile-info {
        display: grid;
        gap: 1rem;
    }

    .info-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1rem;
        padding: 1.5rem;
    }

    .game-tag {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 500;
        margin: 0.125rem;
    }

    .achievements-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
    }

    .achievement {
        text-align: center;
    }

    .achievement-icon {
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 0.5rem;
    }

    .achievement-name {
        color: #9ca3af;
        font-size: 0.75rem;
    }

    /* Bottom Navigation */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(15, 15, 35, 0.95);
        backdrop-filter: blur(10px);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding: 0.5rem;
        z-index: 100;
    }

    @media (min-width: 768px) {
        .bottom-nav {
            display: none;
        }
    }

    .nav-container {
        display: flex;
        justify-content: space-around;
        align-items: center;
        max-width: 480px;
        margin: 0 auto;
    }

    .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
        padding: 0.5rem;
        background: transparent;
        border: none;
        color: #9ca3af;
        text-decoration: none;
        font-size: 0.75rem;
        transition: all 0.2s ease;
        cursor: pointer;
        border-radius: 0.5rem;
        min-width: 64px;
    }

    .nav-item.active {
        color: #6366f1;
    }

    .nav-item:hover:not(.active) {
        color: white;
        background: rgba(255, 255, 255, 0.05);
    }

    .nav-icon {
        font-size: 1.25rem;
    }

    /* Notification Toast */
    .notification-toast {
        position: fixed;
        bottom: 5rem;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: rgba(15, 15, 35, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        min-width: 300px;
        max-width: 90vw;
        z-index: 999;
        opacity: 0;
        transition: all 0.3s ease;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .notification-toast.show {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
    }

    .toast-content {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        flex: 1;
    }

    .toast-icon {
        font-size: 1.25rem;
    }

    .toast-message {
        color: white;
        font-size: 0.875rem;
    }

    .toast-close {
        background: transparent;
        border: none;
        color: #9ca3af;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0;
        line-height: 1;
        transition: color 0.2s ease;
    }

    .toast-close:hover {
        color: white;
    }

    /* FAB Button */
    .fab-button {
        position: fixed;
        bottom: 5rem;
        right: 1rem;
        width: 3.5rem;
        height: 3.5rem;
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        border: none;
        border-radius: 50%;
        color: white;
        font-size: 1.25rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
        transition: all 0.3s ease;
        z-index: 99;
    }

    .fab-button:hover {
        transform: scale(1.1) rotate(90deg);
        box-shadow: 0 6px 24px rgba(99, 102, 241, 0.6);
    }

    @media (min-width: 768px) {
        .fab-button {
            bottom: 2rem;
            right: 2rem;
        }
    }

    /* Modal */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(4px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 1rem;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .modal-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    .modal {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1.5rem;
        width: 100%;
        max-width: 500px;
        max-height: 90vh;
        overflow-y: auto;
        animation: modalSlideUp 0.3s ease;
    }

    @keyframes modalSlideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .modal-header h3 {
        color: white;
        font-size: 1.25rem;
        font-weight: 700;
        margin: 0;
    }

    .modal-close {
        background: transparent;
        border: none;
        color: #9ca3af;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0;
        line-height: 1;
        transition: color 0.2s ease;
    }

    .modal-close:hover {
        color: white;
    }

    .modal-body {
        padding: 1.5rem;
    }

    .modal-actions {
        display: flex;
        gap: 0.75rem;
        padding: 1.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Form Elements */
    .form-group {
        margin-bottom: 1rem;
    }

    .form-group label {
        display: block;
        color: white;
        font-size: 0.875rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 0.75rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        color: white;
        font-size: 0.875rem;
        transition: all 0.2s ease;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #6366f1;
        background: rgba(99, 102, 241, 0.05);
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }

    /* Deposit Modal Specific */
    .deposit-options {
        text-align: center;
    }

    .amount-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.75rem;
    }

    .amount-option {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        padding: 1rem;
        color: white;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .amount-option:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .amount-option.active {
        background: rgba(99, 102, 241, 0.2);
        border-color: #6366f1;
        color: #6366f1;
    }

    .custom-amount {
        text-align: left;
    }

    .payment-methods {
        text-align: left;
    }

    .method-options {
        display: grid;
        grid-template-columns: 1fr;
        gap: 0.75rem;
        margin-top: 0.75rem;
    }

    .method-option {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .method-option.active {
        background: rgba(99, 102, 241, 0.2);
        border-color: #6366f1;
    }

    .method-option input {
        display: none;
    }

    .method-option i {
        font-size: 1.25rem;
        color: white;
    }

    .method-option span {
        color: white;
        font-size: 0.875rem;
        font-weight: 500;
    }

    /* Loading States */
    .loading-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 3rem;
        color: #9ca3af;
        text-align: center;
    }

    .loading-spinner-small {
        width: 2rem;
        height: 2rem;
        border: 3px solid rgba(99, 102, 241, 0.3);
        border-top-color: #6366f1;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
    }

    /* Empty States */
    .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        color: #9ca3af;
    }

    .empty-icon {
        font-size: 3rem;
        color: #6366f1;
        margin-bottom: 1rem;
    }

    .empty-state h3 {
        color: white;
        margin-bottom: 0.5rem;
        font-size: 1.25rem;
    }

    .empty-state p {
        font-size: 0.875rem;
        margin-bottom: 1.5rem;
    }

    /* Error States */
    .error-state {
        text-align: center;
        padding: 3rem 1rem;
        color: #9ca3af;
    }

    .error-icon {
        font-size: 3rem;
        color: #ef4444;
        margin-bottom: 1rem;
    }

    .error-state h3 {
        color: white;
        margin-bottom: 0.5rem;
        font-size: 1.25rem;
    }

    .error-state p {
        font-size: 0.875rem;
        margin-bottom: 1.5rem;
    }

    /* Touch Feedback */
    .touch-feedback {
        transition: transform 0.1s ease;
    }

    .touch-feedback:active {
        transform: scale(0.98);
    }

    /* Better Scroll */
    .better-scroll {
        scrollbar-width: thin;
        scrollbar-color: rgba(99, 102, 241, 0.5) rgba(255, 255, 255, 0.1);
    }

    .better-scroll::-webkit-scrollbar {
        height: 6px;
    }

    .better-scroll::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
    }

    .better-scroll::-webkit-scrollbar-thumb {
        background: rgba(99, 102, 241, 0.5);
        border-radius: 3px;
    }

    /* Text Gradient */
    .text-gradient {
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Animation Classes */
    .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    .animate-spin {
        animation: spin 1s linear infinite;
    }

    /* Hidden Utility */
    .hidden {
        display: none !important;
    }

    /* Mobile Show/Hide */
    .mobile-show {
        display: none;
    }

    @media (max-width: 768px) {
        .mobile-show {
            display: block;
        }
        
        .mobile-hide {
            display: none;
        }
    }

    /* Critical hidden */
    .critical-hidden {
        opacity: 0;
    }

    /* Mobile Menu */
    .mobile-menu {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
        z-index: 1000;
        overflow-y: auto;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }

    .mobile-menu.active {
        transform: translateX(0);
    }

    .mobile-menu-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        color: white;
        text-decoration: none;
        border-radius: 0.75rem;
        transition: all 0.2s ease;
        cursor: pointer;
    }

    .mobile-menu-item:hover,
    .mobile-menu-item.active {
        background: rgba(255, 255, 255, 0.1);
    }

    .mobile-menu-item i {
        width: 1.5rem;
        text-align: center;
    }

    /* For no-js users */
    .no-js-warning {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--background);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        padding: 20px;
    }

    .no-js-content {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        padding: var(--space-8);
        max-width: 400px;
        text-align: center;
    }

    .no-js-content h2 {
        color: var(--error);
        margin-bottom: var(--space-4);
    }

    .no-js-content p {
        color: var(--text-secondary);
        margin-bottom: var(--space-6);
    }

    /* Ensure proper spacing */
    .h-20 {
        height: 5rem;
    }

    @media (min-width: 768px) {
        .md\:h-0 {
            height: 0;
        }
    }

    /* Responsive adjustments */
    @media (max-width: 640px) {
        .stats-grid {
            grid-template-columns: 1fr;
        }
        
        .tournament-details {
            flex-wrap: wrap;
            gap: 0.75rem;
        }
        
        .detail {
            flex: 1;
            min-width: calc(50% - 0.375rem);
        }
        
        .tournament-footer {
            flex-direction: column;
        }
        
        .wallet-actions {
            flex-direction: column;
        }
        
        .profile-actions {
            grid-template-columns: 1fr;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .amount-options {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    /* Dark theme adjustments */
    @media (prefers-color-scheme: dark) {
        .dashboard-container {
            background: linear-gradient(135deg, #0a0a18 0%, #151528 50%, #10182d 100%);
        }
    }

    /* Print styles */
    @media print {
        .bottom-nav,
        .fab-button,
        .notification-toast,
        .mobile-menu-toggle {
            display: none !important;
        }
    }
</style>

<!-- Critical CSS (Inline) -->
<style>
    /* Critical above-the-fold styles */
    .critical-hidden {
        opacity: 0;
    }
    
    /* Prevent FOUC */
    .no-js .critical-hidden {
        opacity: 1;
    }
    
    /* Quick loading animation */
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    
    /* Fallback for non-JS users */
    .no-js .loading-screen {
        display: none !important;
    }
    
    .no-js .dashboard-container {
        opacity: 1 !important;
    }
</style>
</head> <body class="bg-background text-text-primary"> <!-- Loading Screen --> <div id="loadingScreen" class="loading-screen"> <div class="loading-content"> <div class="loading-logo"> <div class="logo-icon w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse"> <i class="fas fa-trophy text-3xl text-white"></i> </div> <h1 class="text-2xl font-bold bg-gradient-to-r from-primary via-accent to-secondary bg-clip-text text-transparent"> TOURNEYHUB PRO </h1> </div> <div class="loading-spinner w-16 h-16 border-4 border-primary/30 border-t-primary rounded-full animate-spin mx-auto"></div> <p class="loading-subtitle mt-4 text-text-secondary">Loading your gaming arena...</p>
        <!-- Loading Progress -->
        <div class="w-48 h-1 bg-surface-dark rounded-full overflow-hidden mt-6 mx-auto">
            <div id="loadingProgress" class="h-full bg-gradient-to-r from-primary to-accent" style="width: 0%"></div>
        </div>
    </div>
</div>

<!-- Main Dashboard Container -->
<div id="mainContent" class="dashboard-container critical-hidden">
    <!-- Enhanced Header -->
    <header class="dashboard-header">
        <div class="header-container">
            <div class="header-left">
                <!-- Mobile Menu Toggle -->
                <button id="mobileMenuToggle" class="btn btn-ghost p-2 mobile-show hidden" aria-label="Open menu">
                    <i class="fas fa-bars text-lg"></i>
                </button>
                
                <!-- Logo -->
                <a href="dashboard.html" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <span class="logo-text">TourneyHub</span>
                </a>
            </div>
            
            <div class="header-right">
                <!-- Mobile Notifications -->
                <button id="mobileNotifications" class="btn btn-ghost p-2 mobile-show hidden relative" aria-label="Notifications">
                    <i class="fas fa-bell"></i>
                    <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-ping"></span>
                    <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                </button>
                
                <!-- Desktop User Info -->
                <div class="user-info">
                    <div class="user-avatar relative">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Gamer&backgroundColor=6366f1" 
                             alt="User Avatar" 
                             class="w-10 h-10 rounded-full"
                             loading="lazy">
                        <div class="status-indicator"></div>
                    </div>
                    <div class="user-details">
                        <div class="user-name font-semibold" id="userName">Pro Gamer</div>
                        <div class="user-email text-xs" id="userEmail">pro@tourneyhub.com</div>
                    </div>
                </div>
                
                <!-- Mobile User Info -->
                <div class="mobile-user flex items-center gap-2">
                    <div class="user-avatar-sm relative">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Gamer&backgroundColor=6366f1" 
                             alt="User Avatar" 
                             class="w-8 h-8 rounded-full"
                             loading="lazy">
                        <div class="status-indicator" style="width: 0.5rem; height: 0.5rem;"></div>
                    </div>
                    <div class="user-level-badge" style="background: rgba(99, 102, 241, 0.2); color: #6366f1; padding: 0.25rem 0.5rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">
                        LVL 42
                    </div>
                </div>
                
                <!-- Desktop Sign Out -->
                <button id="signOutBtn" class="btn btn-ghost btn-sm">
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    Sign Out
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="mobile-menu hidden">
            <div class="p-6">
                <div class="flex justify-between items-center mb-8">
                    <div class="logo flex items-center gap-3">
                        <div class="logo-icon w-10 h-10 bg-gradient-primary rounded-lg flex items-center justify-center">
                            <i class="fas fa-crown text-lg text-white"></i>
                        </div>
                        <span class="logo-text text-xl font-bold">TourneyHub Pro</span>
                    </div>
                    <button id="closeMobileMenu" class="btn btn-ghost p-2" aria-label="Close menu">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Mobile User Profile -->
                <div class="user-profile-mobile text-center mb-8">
                    <div class="user-avatar-lg mx-auto mb-4">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Gamer&backgroundColor=6366f1&accessories=round" 
                             alt="Profile Avatar" 
                             class="w-20 h-20 rounded-full border-4 border-primary"
                             loading="lazy">
                    </div>
                    <h3 class="text-xl font-bold mb-1" id="mobileUserName">Pro Gamer</h3>
                    <p class="text-text-secondary mb-4" id="mobileUserEmail">pro@tourneyhub.com</p>
                    <div class="flex justify-center gap-2">
                        <span class="badge verified">PRO</span>
                        <span class="badge member">Verified</span>
                        <span class="badge" style="background: rgba(168, 85, 247, 0.2); color: #a855f7; border-color: rgba(168, 85, 247, 0.3);">Top 100</span>
                    </div>
                </div>
                
                <!-- Mobile Navigation -->
                <nav class="space-y-2" aria-label="Mobile navigation">
                    <a href="dashboard.html" class="mobile-menu-item active">
                        <i class="fas fa-home text-lg"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="tournaments.html" class="mobile-menu-item">
                        <i class="fas fa-trophy text-lg"></i>
                        <span>Tournaments</span>
                    </a>
                    <a href="games.html" class="mobile-menu-item">
                        <i class="fas fa-gamepad text-lg"></i>
                        <span>Games</span>
                    </a>
                    <a href="leaderboards.html" class="mobile-menu-item">
                        <i class="fas fa-chart-line text-lg"></i>
                        <span>Leaderboards</span>
                    </a>
                    <a href="wallet.html" class="mobile-menu-item">
                        <i class="fas fa-wallet text-lg"></i>
                        <span>Wallet</span>
                    </a>
                    <a href="profile.html" class="mobile-menu-item">
                        <i class="fas fa-user text-lg"></i>
                        <span>Profile</span>
                    </a>
                    <div class="pt-4 border-t border-border mt-4">
                        <button class="mobile-menu-item w-full" style="color: #ef4444;" onclick="signOut()">
                            <i class="fas fa-sign-out-alt text-lg"></i>
                            <span>Sign Out</span>
                        </button>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- Quick Stats Scroll Bar -->
    <section class="quick-stats-bar">
        <div class="stats-scroll-container better-scroll">
            <div class="flex gap-3 min-w-max">
                <!-- XP Progress -->
                <div class="stat-chip touch-feedback" onclick="dashboard.handleQuickStats('xp')">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-text-secondary">XP</span>
                        <i class="fas fa-star" style="color: #f59e0b;"></i>
                    </div>
                    <div class="text-lg font-bold" id="xpValue">12,450</div>
                    <div class="w-full h-1 bg-surface-dark rounded-full mt-2 overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full" style="width: 75%"></div>
                    </div>
                </div>
                
                <!-- Streak -->
                <div class="stat-chip touch-feedback" onclick="dashboard.handleQuickStats('streak')">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-text-secondary">Streak</span>
                        <i class="fas fa-fire" style="color: #ef4444;"></i>
                    </div>
                    <div class="text-lg font-bold" id="streakValue">14 days</div>
                    <div class="text-xs" style="color: #10b981; margin-top: 0.5rem;">ðŸ”¥ +2 days</div>
                </div>
                
                <!-- Rank -->
                <div class="stat-chip touch-feedback" onclick="dashboard.handleQuickStats('rank')">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-text-secondary">Global Rank</span>
                        <i class="fas fa-globe" style="color: #3b82f6;"></i>
                    </div>
                    <div class="text-lg font-bold" id="rankValue">#87</div>
                    <div class="text-xs" style="color: #3b82f6; margin-top: 0.5rem;">â†‘ Up 3 spots</div>
                </div>
                
                <!-- Hours Played -->
                <div class="stat-chip touch-feedback" onclick="dashboard.handleQuickStats('hours')">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-text-secondary">Hours</span>
                        <i class="fas fa-clock" style="color: #8b5cf6;"></i>
                    </div>
                    <div class="text-lg font-bold" id="hoursValue">328h</div>
                    <div class="text-xs text-text-secondary mt-2">This month</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Stats Grid -->
    <section class="stats-section">
        <h2 class="section-title">
            <i class="fas fa-chart-bar" style="color: #6366f1;"></i>
            Performance Overview
        </h2>
        
        <div class="stats-grid">
            <!-- Tournaments Joined -->
            <div class="stat-card touch-feedback" onclick="dashboard.viewTournaments()">
                <div class="stat-icon">
                    <div style="width: 3rem; height: 3rem; background: rgba(59, 130, 246, 0.2); border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-gamepad" style="color: #3b82f6; font-size: 1.5rem;"></i>
                    </div>
                </div>
                <div class="stat-info">
                    <div class="stat-number" id="tournamentsJoined">24</div>
                    <div class="stat-label">Tournaments Joined</div>
                    <div class="stat-trend" style="color: #10b981; font-size: 0.875rem;">
                        <i class="fas fa-arrow-up mr-1"></i>
                        +3 this week
                    </div>
                </div>
            </div>
            
            <!-- Tournaments Won -->
            <div class="stat-card touch-feedback" onclick="dashboard.viewTournaments()">
                <div class="stat-icon">
                    <div style="width: 3rem; height: 3rem; background: rgba(16, 185, 129, 0.2); border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-trophy" style="color: #10b981; font-size: 1.5rem;"></i>
                    </div>
                </div>
                <div class="stat-info">
                    <div class="stat-number" id="tournamentsWon">8</div>
                    <div class="stat-label">Tournaments Won</div>
                    <div class="stat-trend" style="color: #10b981; font-size: 0.875rem;">
                        <i class="fas fa-trend-up mr-1"></i>
                        33% win rate
                    </div>
                </div>
            </div>
            
            <!-- Wallet Balance -->
            <div class="stat-card touch-feedback" onclick="dashboard.switchTab('wallet')">
                <div class="stat-icon">
                    <div style="width: 3rem; height: 3rem; background: rgba(245, 158, 11, 0.2); border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-coins" style="color: #f59e0b; font-size: 1.5rem;"></i>
                    </div>
                </div>
                <div class="stat-info">
                    <div class="stat-number" id="walletBalance">
                        <span class="text-gradient" style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);">â‚®1,240</span>
                    </div>
                    <div class="stat-label">Wallet Balance</div>
                    <div class="stat-trend" style="color: #f59e0b; font-size: 0.875rem;">
                        <i class="fas fa-plus-circle mr-1"></i>
                        â‚®200 pending
                    </div>
                </div>
            </div>
            
            <!-- Win Rate -->
            <div class="stat-card touch-feedback" onclick="dashboard.viewProfile()">
                <div class="stat-icon">
                    <div style="width: 3rem; height: 3rem; background: rgba(168, 85, 247, 0.2); border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-chart-line" style="color: #a855f7; font-size: 1.5rem;"></i>
                    </div>
                </div>
                <div class="stat-info">
                    <div class="stat-number" id="winRate">
                        <span class="text-gradient" style="background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);">67%</span>
                    </div>
                    <div class="stat-label">Win Rate</div>
                    <div class="stat-trend" style="color: #a855f7; font-size: 0.875rem;">
                        <i class="fas fa-arrow-up mr-1"></i>
                        +5% this month
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Actions -->
    <section class="quick-actions">
        <div class="section-header">
            <h2 class="section-title">
                <i class="fas fa-bolt" style="color: #8b5cf6;"></i>
                Quick Actions
            </h2>
            <button class="btn btn-ghost btn-sm" aria-label="More actions" onclick="dashboard.showMoreActions()">
                <i class="fas fa-ellipsis-h"></i>
            </button>
        </div>
        
        <div class="actions-grid">
            <a href="tournaments.html" class="action-card touch-feedback">
                <div class="action-icon">
                    <div style="width: 3.5rem; height: 3.5rem; background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem;">
                        <i class="fas fa-search text-white text-2xl"></i>
                    </div>
                </div>
                <div class="action-text font-semibold">Find Tourneys</div>
                <div class="action-subtext text-xs">Join competitions</div>
            </a>
            
            <a href="javascript:void(0)" class="action-card touch-feedback" onclick="dashboard.showDepositModal()">
                <div class="action-icon">
                    <div style="width: 3.5rem; height: 3.5rem; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem;">
                        <i class="fas fa-plus text-white text-2xl"></i>
                    </div>
                </div>
                <div class="action-text font-semibold">Add Funds</div>
                <div class="action-subtext text-xs">Top up wallet</div>
            </a>
            
            <a href="admin.html" class="action-card touch-feedback">
                <div class="action-icon">
                    <div style="width: 3.5rem; height: 3.5rem; background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem;">
                        <i class="fas fa-plus-circle text-white text-2xl"></i>
                    </div>
                </div>
                <div class="action-text font-semibold">Host Event</div>
                <div class="action-subtext text-xs">Create tournament</div>
            </a>
            
            <button class="action-card touch-feedback" id="profileSettings" onclick="dashboard.editProfile()">
                <div class="action-icon">
                    <div style="width: 3.5rem; height: 3.5rem; background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%); border-radius: 1rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem;">
                        <i class="fas fa-user-cog text-white text-2xl"></i>
                    </div>
                </div>
                <div class="action-text font-semibold">Settings</div>
                <div class="action-subtext text-xs">Account settings</div>
            </button>
        </div>
    </section>

    <!-- Tab Navigation -->
    <section class="tab-section">
        <div class="tab-navigation">
            <div class="tab-list" id="tabList" role="tablist">
                <button class="tab active" data-tab="tournaments" role="tab" aria-selected="true" aria-controls="tournaments-panel" onclick="dashboard.switchTab('tournaments')">
                    <span class="tab-icon"><i class="fas fa-trophy"></i></span>
                    <span class="tab-text">My Tourneys</span>
                </button>
                <button class="tab" data-tab="matches" role="tab" aria-selected="false" aria-controls="matches-panel" onclick="dashboard.switchTab('matches')">
                    <span class="tab-icon"><i class="fas fa-crosshairs"></i></span>
                    <span class="tab-text">Matches</span>
                </button>
                <button class="tab" data-tab="wallet" role="tab" aria-selected="false" aria-controls="wallet-panel" onclick="dashboard.switchTab('wallet')">
                    <span class="tab-icon"><i class="fas fa-wallet"></i></span>
                    <span class="tab-text">Wallet</span>
                </button>
                <button class="tab" data-tab="profile" role="tab" aria-selected="false" aria-controls="profile-panel" onclick="dashboard.switchTab('profile')">
                    <span class="tab-icon"><i class="fas fa-user"></i></span>
                    <span class="tab-text">Profile</span>
                </button>
            </div>
        </div>
        
        <!-- Mobile Tab Indicator -->
        <div class="mobile-tab-indicator" id="mobileTabIndicator"></div>
    </section>

    <!-- Tab Content -->
    <div class="tab-content-area">
        <!-- Tournaments Tab -->
        <div id="tournaments-panel" class="tab-panel active" role="tabpanel" aria-labelledby="tab-tournaments">
            <div class="panel-header">
                <h3 class="text-lg font-bold">
                    <i class="fas fa-gamepad"></i>
                    Active Tournaments
                </h3>
                <div class="flex gap-2">
                    <button class="btn btn-ghost btn-sm" onclick="dashboard.refreshTournaments()" aria-label="Refresh tournaments">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <a href="tournaments.html" class="btn btn-primary btn-sm">
                        <i class="fas fa-plus mr-1"></i>
                        Join New
                    </a>
                </div>
            </div>
            
            <div class="tournaments-list" id="tournamentsList">
                <!-- Dynamic content loaded by JavaScript -->
                <div class="loading-state">
                    <div class="loading-spinner-small"></div>
                    <p>Loading tournaments...</p>
                </div>
            </div>
            
            <!-- View All -->
            <div class="text-center mt-6">
                <a href="tournaments.html" class="btn btn-ghost btn-sm">
                    View All Tournaments
                    <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </div>
        
        <!-- Matches Tab -->
        <div id="matches-panel" class="tab-panel" role="tabpanel" aria-labelledby="tab-matches" hidden>
            <div class="panel-header">
                <h3 class="text-lg font-bold">
                    <i class="fas fa-crosshairs"></i>
                    Recent & Upcoming Matches
                </h3>
            </div>
            
            <div class="matches-list" id="matchesList">
                <!-- Dynamic content loaded by JavaScript -->
                <div class="loading-state">
                    <div class="loading-spinner-small"></div>
                    <p>Loading matches...</p>
                </div>
            </div>
        </div>
        
        <!-- Wallet Tab -->
        <div id="wallet-panel" class="tab-panel" role="tabpanel" aria-labelledby="tab-wallet" hidden>
            <div class="panel-header">
                <h3 class="text-lg font-bold">
                    <i class="fas fa-wallet"></i>
                    Wallet & Transactions
                </h3>
                <a href="wallet.html" class="btn btn-primary btn-sm">
                    <i class="fas fa-exchange-alt mr-1"></i>
                    Manage
                </a>
            </div>
            
            <div class="wallet-content">
                <!-- Balance Card -->
                <div class="wallet-card touch-feedback">
                    <div class="wallet-balance text-center mb-6">
                        <div class="balance-label text-text-secondary mb-2">Available Balance</div>
                        <div class="balance-amount text-4xl font-bold mb-1" id="detailedBalance">
                            <span class="text-gradient" style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);">â‚®1,240.50</span>
                        </div>
                        <div class="balance-subtitle text-sm text-text-secondary">
                            â‰ˆ $124.05 USD
                        </div>
                    </div>
                    
                    <div class="wallet-actions flex gap-2">
                        <a href="javascript:void(0)" class="btn btn-primary flex-1" onclick="dashboard.showDepositModal()">
                            <i class="fas fa-arrow-down mr-2"></i>
                            Deposit
                        </a>
                        <a href="wallet.html?tab=withdraw" class="btn btn-secondary flex-1">
                            <i class="fas fa-arrow-up mr-2"></i>
                            Withdraw
                        </a>
                    </div>
                </div>
                
                <!-- Quick Wallet Actions -->
                <div class="quick-wallet-actions mb-6">
                    <div class="grid grid-cols-4 gap-2">
                        <button class="wallet-action-btn touch-feedback" onclick="dashboard.showDepositModal()">
                            <div class="action-icon mb-2">
                                <div style="width: 2.5rem; height: 2.5rem; background: rgba(59, 130, 246, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                                    <i class="fas fa-bolt" style="color: #3b82f6;"></i>
                                </div>
                            </div>
                            <div class="action-text text-xs">Instant</div>
                        </button>
                        <button class="wallet-action-btn touch-feedback" onclick="dashboard.checkRewards()">
                            <div class="action-icon mb-2">
                                <div style="width: 2.5rem; height: 2.5rem; background: rgba(16, 185, 129, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                                    <i class="fas fa-gift" style="color: #10b981;"></i>
                                </div>
                            </div>
                            <div class="action-text text-xs">Rewards</div>
                        </button>
                        <button class="wallet-action-btn touch-feedback" onclick="dashboard.switchTab('wallet')">
                            <div class="action-icon mb-2">
                                <div style="width: 2.5rem; height: 2.5rem; background: rgba(168, 85, 247, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                                    <i class="fas fa-history" style="color: #a855f7;"></i>
                                </div>
                            </div>
                            <div class="action-text text-xs">History</div>
                        </button>
                        <button class="wallet-action-btn touch-feedback" onclick="dashboard.openSettings()">
                            <div class="action-icon mb-2">
                                <div style="width: 2.5rem; height: 2.5rem; background: rgba(239, 68, 68, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                                    <i class="fas fa-cog" style="color: #ef4444;"></i>
                                </div>
                            </div>
                            <div class="action-text text-xs">Settings</div>
                        </button>
                    </div>
                </div>
                
                <!-- Recent Transactions -->
                <div class="transaction-history">
                    <h4 class="font-bold mb-3">
                        <i class="fas fa-exchange-alt"></i>
                        Recent Transactions
                    </h4>
                    
                    <div class="transactions-list" id="transactionsList">
                        <!-- Dynamic content loaded by JavaScript -->
                        <div class="loading-state">
                            <div class="loading-spinner-small"></div>
                            <p>Loading transactions...</p>
                        </div>
                    </div>
                    
                    <!-- View All -->
                    <div class="text-center mt-4">
                        <button class="btn btn-ghost btn-sm" onclick="dashboard.viewAllTransactions()">
                            View All Transactions
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Profile Tab -->
        <div id="profile-panel" class="tab-panel" role="tabpanel" aria-labelledby="tab-profile" hidden>
            <div class="profile-content">
                <!-- Profile Card -->
                <div class="profile-card touch-feedback">
                    <div class="profile-header text-center mb-6">
                        <div class="profile-avatar-large mx-auto mb-4 relative">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Gamer&backgroundColor=6366f1&accessories=round" 
                                 alt="Profile Avatar" 
                                 class="w-24 h-24 rounded-full border-4 border-primary/30"
                                 loading="lazy">
                            <button class="absolute bottom-0 right-0 w-8 h-8 bg-primary rounded-full flex items-center justify-center border-2 border-surface" 
                                    onclick="dashboard.changeAvatar()"
                                    aria-label="Change avatar"
                                    style="background: #6366f1; border-color: #1a1a2e;">
                                <i class="fas fa-camera text-white text-xs"></i>
                            </button>
                        </div>
                        
                        <div class="profile-info">
                            <h4 id="profileName" class="text-2xl font-bold mb-1">Pro Gamer</h4>
                            <p class="profile-email text-text-secondary mb-4" id="profileEmail">pro@tourneyhub.com</p>
                            
                            <div class="profile-badges flex justify-center gap-2 mb-6">
                                <span class="badge verified">
                                    <i class="fas fa-check mr-1"></i>
                                    Verified
                                </span>
                                <span class="badge member">
                                    <i class="fas fa-crown mr-1"></i>
                                    Pro Member
                                </span>
                                <span class="badge" id="memberSince" style="background: rgba(156, 163, 175, 0.2); color: #9ca3af; border-color: rgba(156, 163, 175, 0.3);">
                                    Since 2023
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Profile Stats -->
                    <div class="profile-stats mb-6">
                        <div class="profile-stat text-center">
                            <div class="stat-value text-2xl font-bold" id="profileTournaments">24</div>
                            <div class="stat-label text-sm text-text-secondary">Tournaments</div>
                        </div>
                        <div class="profile-stat text-center">
                            <div class="stat-value text-2xl font-bold" id="profileWins">8</div>
                            <div class="stat-label text-sm text-text-secondary">Wins</div>
                        </div>
                        <div class="profile-stat text-center">
                            <div class="stat-value text-2xl font-bold" id="profileWinRate">67%</div>
                            <div class="stat-label text-sm text-text-secondary">Win Rate</div>
                        </div>
                    </div>
                    
                    <!-- Profile Actions -->
                    <div class="profile-actions">
                        <button class="btn btn-secondary" onclick="dashboard.editProfile()">
                            <i class="fas fa-edit mr-2"></i>
                            Edit Profile
                        </button>
                        <button class="btn btn-ghost" onclick="dashboard.verifyEmail()">
                            <i class="fas fa-envelope mr-2"></i>
                            Verify Email
                        </button>
                        <button class="btn btn-ghost" onclick="dashboard.openSecurity()">
                            <i class="fas fa-shield-alt mr-2"></i>
                            Security
                        </button>
                        <button class="btn btn-ghost" onclick="dashboard.openSettings()">
                            <i class="fas fa-cog mr-2"></i>
                            Settings
                        </button>
                    </div>
                </div>
                
                <!-- Additional Profile Info -->
                <div class="additional-profile-info mt-6">
                    <!-- Gaming Preferences -->
                    <div class="info-card">
                        <h5 class="font-bold mb-3">
                            <i class="fas fa-gamepad"></i>
                            Gaming Preferences
                        </h5>
                        <div class="flex flex-wrap gap-2">
                            <span class="game-tag" style="background: rgba(59, 130, 246, 0.2); color: #3b82f6;">Valorant</span>
                            <span class="game-tag" style="background: rgba(16, 185, 129, 0.2); color: #10b981;">CS:GO</span>
                            <span class="game-tag" style="background: rgba(168, 85, 247, 0.2); color: #a855f7;">Fortnite</span>
                            <span class="game-tag" style="background: rgba(239, 68, 68, 0.2); color: #ef4444;">Apex Legends</span>
                            <span class="game-tag" style="background: rgba(245, 158, 11, 0.2); color: #f59e0b;">Dota 2</span>
                        </div>
                    </div>
                    
                    <!-- Recent Achievements -->
                    <div class="info-card">
                        <h5 class="font-bold mb-3">
                            <i class="fas fa-medal"></i>
                            Recent Achievements
                        </h5>
                        <div class="achievements-grid">
                            <div class="achievement text-center">
                                <div class="achievement-icon" style="background: rgba(245, 158, 11, 0.2);">
                                    <i class="fas fa-trophy" style="color: #f59e0b;"></i>
                                </div>
                                <div class="achievement-name text-xs">First Win</div>
                            </div>
                            <div class="achievement text-center">
                                <div class="achievement-icon" style="background: rgba(59, 130, 246, 0.2);">
                                    <i class="fas fa-fire" style="color: #3b82f6;"></i>
                                </div>
                                <div class="achievement-name text-xs">10 Day Streak</div>
                            </div>
                            <div class="achievement text-center">
                                <div class="achievement-icon" style="background: rgba(168, 85, 247, 0.2);">
                                    <i class="fas fa-star" style="color: #a855f7;"></i>
                                </div>
                                <div class="achievement-name text-xs">Top 100</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bottom Spacing -->
    <div class="h-20 md:h-0"></div>
</div>

<!-- Bottom Navigation (Mobile) -->
<nav class="bottom-nav" aria-label="Mobile navigation">
    <div class="nav-container">
        <a href="tournaments.html" class="nav-item">
            <span class="nav-icon"><i class="fas fa-trophy"></i></span>
            <span class="nav-text">Tourneys</span>
        </a>
        <a href="games.html" class="nav-item">
            <span class="nav-icon"><i class="fas fa-gamepad"></i></span>
            <span class="nav-text">Games</span>
        </a>
        <a href="dashboard.html" class="nav-item active">
            <span class="nav-icon"><i class="fas fa-home"></i></span>
            <span class="nav-text">Home</span>
        </a>
        <a href="leaderboards.html" class="nav-item">
            <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
            <span class="nav-text">Rankings</span>
        </a>
        <button class="nav-item" onclick="dashboard.switchTab('profile')">
            <span class="nav-icon"><i class="fas fa-user"></i></span>
            <span class="nav-text">Profile</span>
        </button>
    </div>
</nav>

<!-- Notification Toast -->
<div id="notificationToast" class="notification-toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-content">
        <span class="toast-icon" id="toastIcon">âš ï¸</span>
        <span class="toast-message" id="toastMessage"></span>
    </div>
    <button id="toastClose" class="toast-close" aria-label="Close notification">
        Ã—
    </button>
</div>

<!-- Floating Action Button -->
<button class="fab-button" id="fabButton" aria-label="Quick action" onclick="dashboard.showQuickActions()">
    <i class="fas fa-plus"></i>
</button>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-storage-compat.js"></script>

<!-- Dashboard JavaScript with Fix -->
<script>
    // Fixed dashboard.js with missing methods added
    // Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyA7QsyV2yb4f_acY9ETQnTSna7YHxwOJw4",
        authDomain: "authapp-386ee.firebaseapp.com",
        projectId: "authapp-386ee",
        storageBucket: "authapp-386ee.appspot.com",
        messagingSenderId: "809698525310",
        appId: "1:809698525310:web:5cb7de80bde9ed1f26982f",
        measurementId: "G-EJZTSBSGQT"
    };

    // Initialize Firebase
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }

    // Firebase Services
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();

    // Global State
    let currentUser = null;
    let userData = null;
    let tournaments = [];
    let matches = [];
    let transactions = [];
    let notifications = [];

    // Dashboard Class
    class Dashboard {
        constructor() {
            this.isLoading = false;
            this.currentTab = 'tournaments';
            this.theme = 'dark';
            this.notificationInterval = null;
            this.realTimeListeners = [];
            
            // Initialize on DOM ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => this.init());
            } else {
                this.init();
            }
        }

        async init() {
            try {
                // Show loading screen
                this.showLoadingScreen();
                
                // Check authentication
                await this.checkAuth();
                
                // Setup all event listeners
                this.setupEventListeners();
                
                // Initialize UI components
                this.initializeUI();
                
                // Load user data
                await this.loadUserData();
                
                // Load initial data
                await this.loadInitialData();
                
                // Setup real-time listeners
                this.setupRealTimeListeners();
                
                // Start background updates
                this.startBackgroundUpdates();
                
                // Hide loading screen
                setTimeout(() => {
                    this.hideLoadingScreen();
                    this.showNotification('Welcome back, ' + (userData?.displayName || 'Gamer') + '!', 'success');
                }, 1000);
                
                console.log('Dashboard initialized successfully');
                
            } catch (error) {
                console.error('Failed to initialize dashboard:', error);
                this.showNotification('Failed to initialize dashboard', 'error');
                
                // Fallback to sample data
                this.loadSampleData();
                this.hideLoadingScreen();
            }
        }

        // =================== AUTHENTICATION ===================
        async checkAuth() {
            return new Promise((resolve, reject) => {
                const unsubscribe = auth.onAuthStateChanged(async (user) => {
                    try {
                        if (!user) {
                            console.log('No user authenticated, redirecting to login...');
                            window.location.href = 'login.html';
                            return;
                        }

                        currentUser = user;
                        console.log('User authenticated:', user.email);
                        
                        // Load user document
                        const userDoc = await db.collection('users').doc(user.uid).get();
                        
                        if (!userDoc.exists) {
                            console.log('Creating new user document...');
                            await this.createUserDocument(user);
                        } else {
                            userData = { id: userDoc.id, ...userDoc.data() };
                        }
                        
                        unsubscribe();
                        resolve(userData);
                        
                    } catch (error) {
                        console.error('Error in auth check:', error);
                        reject(error);
                    }
                });
            });
        }

        async createUserDocument(user) {
            const userData = {
                email: user.email,
                displayName: user.displayName || 'Pro Gamer',
                photoURL: user.photoURL || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.uid}&backgroundColor=6366f1`,
                role: 'user',
                balance: 0,
                xp: 0,
                level: 1,
                tournamentsPlayed: 0,
                tournamentsWon: 0,
                winRate: 0,
                streak: 0,
                joinedAt: firebase.firestore.FieldValue.serverTimestamp(),
                lastActive: firebase.firestore.FieldValue.serverTimestamp(),
                preferences: {
                    theme: 'dark',
                    notifications: true,
                    emailUpdates: true
                },
                stats: {
                    totalMatches: 0,
                    totalWins: 0,
                    totalEarnings: 0,
                    favoriteGame: 'Valorant'
                }
            };

            await db.collection('users').doc(user.uid).set(userData);
            return userData;
        }

        // =================== EVENT LISTENERS ===================
        setupEventListeners() {
            // Mobile Menu Toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const closeMobileMenu = document.getElementById('closeMobileMenu');
            const mobileMenu = document.getElementById('mobileMenu');
            
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', () => {
                    mobileMenu.classList.remove('hidden');
                    mobileMenu.classList.add('active');
                });
            }
            
            if (closeMobileMenu) {
                closeMobileMenu.addEventListener('click', () => {
                    mobileMenu.classList.remove('active');
                    mobileMenu.classList.add('hidden');
                });
            }

            // Close mobile menu on outside click
            document.addEventListener('click', (e) => {
                if (!mobileMenu.contains(e.target) && !mobileMenuToggle.contains(e.target)) {
                    mobileMenu.classList.remove('active');
                    mobileMenu.classList.add('hidden');
                }
            });

            // Tab Navigation
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    const tabName = e.currentTarget.dataset.tab;
                    this.switchTab(tabName);
                });
            });

            // Bottom Navigation
            const bottomNavItems = document.querySelectorAll('.bottom-nav .nav-item');
            bottomNavItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = e.currentTarget.getAttribute('onclick');
                    if (target && target.includes('switchTab')) {
                        const tabName = target.match(/switchTab\('(.+)'\)/)[1];
                        this.switchTab(tabName);
                    }
                });
            });

            // Sign Out Button
            const signOutBtn = document.getElementById('signOutBtn');
            if (signOutBtn) {
                signOutBtn.addEventListener('click', () => this.signOut());
            }

            // Mobile Notifications
            const mobileNotifications = document.getElementById('mobileNotifications');
            if (mobileNotifications) {
                mobileNotifications.addEventListener('click', () => {
                    this.showNotification('Notifications feature coming soon!', 'info');
                });
            }

            // FAB Button
            const fabButton = document.getElementById('fabButton');
            if (fabButton) {
                fabButton.addEventListener('click', () => {
                    this.showQuickActions();
                });
            }

            // Notification Toast Close
            const toastClose = document.getElementById('toastClose');
            if (toastClose) {
                toastClose.addEventListener('click', () => {
                    this.hideNotificationToast();
                });
            }

            // Quick Action Buttons
            const quickActionButtons = document.querySelectorAll('.action-card');
            quickActionButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const action = e.currentTarget.querySelector('.action-text').textContent;
                    this.handleQuickAction(action);
                });
            });

            // Profile Settings
            const profileSettings = document.getElementById('profileSettings');
            if (profileSettings) {
                profileSettings.addEventListener('click', () => {
                    this.editProfile();
                });
            }

            // Tournament Refresh
            const refreshTournaments = document.querySelector('[onclick="dashboard.refreshTournaments()"]');
            if (refreshTournaments) {
                refreshTournaments.addEventListener('click', () => this.refreshTournaments());
            }

            // Wallet Buttons
            const walletButtons = document.querySelectorAll('.wallet-action-btn');
            walletButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const action = e.currentTarget.querySelector('.action-text').textContent;
                    this.handleWalletAction(action);
                });
            });

            // Profile Buttons
            const profileButtons = document.querySelectorAll('.profile-actions button');
            profileButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const text = e.currentTarget.textContent.trim();
                    this.handleProfileAction(text);
                });
            });

            // Touch Feedback
            const touchElements = document.querySelectorAll('.touch-feedback');
            touchElements.forEach(element => {
                element.addEventListener('touchstart', () => {
                    element.classList.add('active');
                });
                
                element.addEventListener('touchend', () => {
                    setTimeout(() => {
                        element.classList.remove('active');
                    }, 150);
                });
            });

            // Window resize handling
            window.addEventListener('resize', () => this.handleResize());
            
            // Before unload
            window.addEventListener('beforeunload', () => {
                this.cleanup();
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                this.handleKeyboardShortcuts(e);
            });
        }

        // =================== UI INITIALIZATION ===================
        initializeUI() {
            // Set current year if needed
            const yearElements = document.querySelectorAll('.current-year');
            yearElements.forEach(el => {
                el.textContent = new Date().getFullYear();
            });

            // Initialize mobile detection
            this.initializeMobileDetection();

            // Initialize animations
            this.initializeAnimations();

            // Initialize tooltips - FIXED: Now properly defined
            this.initializeTooltips();

            // Initialize scroll behavior
            this.initializeScrollBehavior();
        }

        // ADDED: Missing method that was causing the error
        initializeTooltips() {
            // Tooltip functionality is not required in this version
            // This is a placeholder to avoid errors
            console.log('Tooltips initialized (placeholder)');
        }

        initializeMobileDetection() {
            const isMobile = window.innerWidth <= 768;
            
            // Show/hide mobile elements
            const mobileElements = document.querySelectorAll('.mobile-show, .mobile-hide');
            mobileElements.forEach(el => {
                if (el.classList.contains('mobile-show') && isMobile) {
                    el.classList.remove('hidden');
                } else if (el.classList.contains('mobile-hide') && isMobile) {
                    el.classList.add('hidden');
                }
            });

            // Update tab indicator position
            this.updateTabIndicator();
        }

        initializeAnimations() {
            // Add intersection observer for lazy loading
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            // Observe elements with animate class
            document.querySelectorAll('.animate-on-scroll').forEach(el => {
                observer.observe(el);
            });
        }

        // ADDED: Missing method
        initializeScrollBehavior() {
            // Smooth scroll for anchor links
            document.addEventListener('click', (e) => {
                if (e.target.matches('a[href^="#"]')) {
                    e.preventDefault();
                    const id = e.target.getAttribute('href');
                    if (id === '#') return;
                    const element = document.querySelector(id);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });
        }

        // ADDED: Missing method for handling quick stats
        handleQuickStats(type) {
            switch(type) {
                case 'xp':
                    this.showNotification('XP details coming soon!', 'info');
                    break;
                case 'streak':
                    this.showNotification('Streak details coming soon!', 'info');
                    break;
                case 'rank':
                    this.showNotification('Rank details coming soon!', 'info');
                    break;
                case 'hours':
                    this.showNotification('Hours played details coming soon!', 'info');
                    break;
            }
        }

        // =================== DATA LOADING ===================
        async loadUserData() {
            try {
                if (!currentUser) return;

                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                if (userDoc.exists) {
                    userData = { id: userDoc.id, ...userDoc.data() };
                    this.updateUserUI(userData);
                }
            } catch (error) {
                console.error('Error loading user data:', error);
                this.showNotification('Error loading profile data', 'error');
            }
        }

        async loadInitialData() {
            try {
                // Load all data in parallel
                await Promise.all([
                    this.loadTournaments(),
                    this.loadMatches(),
                    this.loadTransactions(),
                    this.loadNotifications(),
                    this.loadUserStats()
                ]);
                
                // Update dashboard stats
                this.updateDashboardStats();
                
            } catch (error) {
                console.error('Error loading initial data:', error);
                this.showNotification('Error loading dashboard data', 'error');
                
                // Load sample data as fallback
                this.loadSampleData();
            }
        }

        async loadTournaments() {
            try {
                this.setLoadingState('tournamentsList', true);
                
                let query = db.collection('tournaments')
                    .where('status', 'in', ['active', 'upcoming', 'registering'])
                    .orderBy('startDate', 'asc')
                    .limit(10);

                // If user is logged in, also get their registered tournaments
                if (currentUser) {
                    const registeredQuery = db.collection('tournaments')
                        .where('participants', 'array-contains', currentUser.uid)
                        .orderBy('startDate', 'asc')
                        .limit(5);

                    const [activeSnap, registeredSnap] = await Promise.all([
                        query.get(),
                        registeredQuery.get()
                    ]);

                    const activeTournaments = activeSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    const registeredTournaments = registeredSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                    // Merge and deduplicate
                    tournaments = [...activeTournaments, ...registeredTournaments].filter((v, i, a) => 
                        a.findIndex(t => t.id === v.id) === i
                    );

                } else {
                    const snapshot = await query.get();
                    tournaments = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                }

                this.renderTournaments();
                this.setLoadingState('tournamentsList', false);

            } catch (error) {
                console.error('Error loading tournaments:', error);
                this.setLoadingState('tournamentsList', false);
                this.renderTournamentsError();
            }
        }

        async loadMatches() {
            try {
                this.setLoadingState('matchesList', true);

                if (!currentUser) {
                    this.renderSampleMatches();
                    return;
                }

                const snapshot = await db.collection('matches')
                    .where('participants', 'array-contains', currentUser.uid)
                    .orderBy('scheduledTime', 'desc')
                    .limit(10)
                    .get();

                matches = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                this.renderMatches();
                this.setLoadingState('matchesList', false);

            } catch (error) {
                console.error('Error loading matches:', error);
                this.setLoadingState('matchesList', false);
                this.renderSampleMatches();
            }
        }

        async loadTransactions() {
            try {
                this.setLoadingState('transactionsList', true);

                if (!currentUser) {
                    this.renderSampleTransactions();
                    return;
                }

                const snapshot = await db.collection('transactions')
                    .where('userId', '==', currentUser.uid)
                    .orderBy('timestamp', 'desc')
                    .limit(10)
                    .get();

                transactions = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                this.renderTransactions();
                this.setLoadingState('transactionsList', false);

            } catch (error) {
                console.error('Error loading transactions:', error);
                this.setLoadingState('transactionsList', false);
                this.renderSampleTransactions();
            }
        }

        async loadNotifications() {
            try {
                if (!currentUser) return;

                const snapshot = await db.collection('notifications')
                    .where('userId', '==', currentUser.uid)
                    .where('read', '==', false)
                    .orderBy('createdAt', 'desc')
                    .limit(20)
                    .get();

                notifications = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                this.updateNotificationBadge(notifications.length);

            } catch (error) {
                console.error('Error loading notifications:', error);
            }
        }

        async loadUserStats() {
            try {
                if (!currentUser) return;

                // Calculate stats from user's tournaments and matches
                const [tournamentsSnap, matchesSnap] = await Promise.all([
                    db.collection('tournaments')
                        .where('participants', 'array-contains', currentUser.uid)
                        .get(),
                    db.collection('matches')
                        .where('participants', 'array-contains', currentUser.uid)
                        .get()
                ]);

                const userTournaments = tournamentsSnap.docs.map(doc => doc.data());
                const userMatches = matchesSnap.docs.map(doc => doc.data());

                // Calculate statistics
                const stats = {
                    tournamentsJoined: userTournaments.length,
                    tournamentsWon: userTournaments.filter(t => t.winner === currentUser.uid).length,
                    totalMatches: userMatches.length,
                    matchesWon: userMatches.filter(m => m.winner === currentUser.uid).length,
                    winRate: userMatches.length > 0 ? 
                        (userMatches.filter(m => m.winner === currentUser.uid).length / userMatches.length * 100).toFixed(1) : 0
                };

                // Update user document with calculated stats
                await db.collection('users').doc(currentUser.uid).update({
                    stats: stats,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });

                userData.stats = stats;
                this.updateDashboardStats();

            } catch (error) {
                console.error('Error loading user stats:', error);
            }
        }

        // =================== UI UPDATES ===================
        updateUserUI(user) {
            // Update user info in header
            const userNameElements = document.querySelectorAll('#userName, #mobileUserName, #profileName');
            const userEmailElements = document.querySelectorAll('#userEmail, #mobileUserEmail, #profileEmail');
            const userAvatarElements = document.querySelectorAll('.user-avatar img, .user-avatar-sm img, .profile-avatar-large img');
            
            userNameElements.forEach(el => {
                el.textContent = user.displayName || 'Pro Gamer';
            });
            
            userEmailElements.forEach(el => {
                el.textContent = user.email || 'user@tourneyhub.com';
            });
            
            // Update avatars
            userAvatarElements.forEach(img => {
                img.src = user.photoURL || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.email}&backgroundColor=6366f1`;
                img.alt = `${user.displayName}'s avatar`;
            });

            // Update profile badges
            const memberSince = document.getElementById('memberSince');
            if (memberSince && user.joinedAt) {
                const date = user.joinedAt.toDate ? user.joinedAt.toDate() : new Date(user.joinedAt);
                memberSince.textContent = `Since ${date.getFullYear()}`;
            }

            // Update level badge if exists
            const levelBadge = document.querySelector('.user-level-badge');
            if (levelBadge && user.level) {
                levelBadge.textContent = `LVL ${user.level}`;
            }
        }

        updateDashboardStats() {
            const stats = userData?.stats || {};
            
            // Update quick stats
            const xpElement = document.querySelector('.stat-chip:nth-child(1) .text-lg');
            if (xpElement && userData?.xp) {
                xpElement.textContent = userData.xp.toLocaleString();
            }

            const streakElement = document.querySelector('.stat-chip:nth-child(2) .text-lg');
            if (streakElement && userData?.streak) {
                streakElement.textContent = `${userData.streak} days`;
            }

            // Update main stats
            const tournamentsJoined = document.getElementById('tournamentsJoined');
            if (tournamentsJoined) {
                tournamentsJoined.textContent = stats.tournamentsJoined || 0;
            }

            const tournamentsWon = document.getElementById('tournamentsWon');
            if (tournamentsWon) {
                tournamentsWon.textContent = stats.tournamentsWon || 0;
            }

            const walletBalance = document.getElementById('walletBalance');
            if (walletBalance && userData?.balance !== undefined) {
                walletBalance.innerHTML = `<span class="text-gradient" style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);">â‚®${userData.balance.toLocaleString()}</span>`;
            }

            const winRate = document.getElementById('winRate');
            if (winRate) {
                winRate.innerHTML = `<span class="text-gradient" style="background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);">${stats.winRate || 0}%</span>`;
            }

            // Update profile stats
            const profileTournaments = document.getElementById('profileTournaments');
            const profileWins = document.getElementById('profileWins');
            const profileWinRate = document.getElementById('profileWinRate');
            
            if (profileTournaments) profileTournaments.textContent = stats.tournamentsJoined || 0;
            if (profileWins) profileWins.textContent = stats.tournamentsWon || 0;
            if (profileWinRate) profileWinRate.textContent = `${stats.winRate || 0}%`;
        }

        // =================== RENDERING FUNCTIONS ===================
        renderTournaments() {
            const container = document.getElementById('tournamentsList');
            if (!container) return;

            if (tournaments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h3>No Tournaments Found</h3>
                        <p>Join your first tournament to get started!</p>
                        <a href="tournaments.html" class="btn btn-primary mt-4">
                            <i class="fas fa-search mr-2"></i>
                            Browse Tournaments
                        </a>
                    </div>
                `;
                return;
            }

            const tournamentCards = tournaments.map(tournament => {
                const startDate = tournament.startDate?.toDate ? tournament.startDate.toDate() : new Date(tournament.startDate);
                const now = new Date();
                const hoursUntilStart = Math.max(0, Math.floor((startDate - now) / (1000 * 60 * 60)));
                
                let statusBadge = '';
                switch(tournament.status) {
                    case 'active':
                        statusBadge = '<span class="badge" style="background: rgba(16, 185, 129, 0.2); color: #10b981; border-color: rgba(16, 185, 129, 0.3);">Live</span>';
                        break;
                    case 'upcoming':
                        statusBadge = '<span class="badge" style="background: rgba(59, 130, 246, 0.2); color: #3b82f6; border-color: rgba(59, 130, 246, 0.3);">Upcoming</span>';
                        break;
                    case 'registering':
                        statusBadge = '<span class="badge" style="background: rgba(245, 158, 11, 0.2); color: #f59e0b; border-color: rgba(245, 158, 11, 0.3);">Registering</span>';
                        break;
                    default:
                        statusBadge = '<span class="badge" style="background: rgba(156, 163, 175, 0.2); color: #9ca3af; border-color: rgba(156, 163, 175, 0.3);">Draft</span>';
                }

                return `
                    <div class="tournament-card touch-feedback" data-tournament-id="${tournament.id}">
                        <div class="tournament-header">
                            <div class="tournament-game">
                                <i class="fas fa-gamepad mr-2"></i>
                                ${tournament.game || 'Unknown Game'}
                            </div>
                            ${statusBadge}
                        </div>
                        <div class="tournament-body">
                            <h4 class="tournament-title">${tournament.title || 'Untitled Tournament'}</h4>
                            <p class="tournament-description">${tournament.description?.substring(0, 80) || 'No description available'}...</p>
                            
                            <div class="tournament-details">
                                <div class="detail">
                                    <i class="fas fa-users"></i>
                                    <span>${tournament.currentPlayers || 0}/${tournament.maxPlayers || 'âˆž'}</span>
                                </div>
                                <div class="detail">
                                    <i class="fas fa-coins"></i>
                                    <span>â‚®${tournament.prizePool?.toLocaleString() || 0}</span>
                                </div>
                                <div class="detail">
                                    <i class="fas fa-clock"></i>
                                    <span>${hoursUntilStart > 24 ? 
                                        Math.floor(hoursUntilStart / 24) + ' days' : 
                                        hoursUntilStart + ' hours'}</span>
                                </div>
                            </div>
                        </div>
                        <div class="tournament-footer">
                            <button class="btn btn-sm btn-outline" onclick="dashboard.viewTournament('${tournament.id}')">
                                View Details
                            </button>
                            <button class="btn btn-sm btn-primary" onclick="dashboard.joinTournament('${tournament.id}')">
                                Join Now
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = tournamentCards;
        }

        renderMatches() {
            const container = document.getElementById('matchesList');
            if (!container) return;

            if (matches.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-crosshairs"></i>
                        </div>
                        <h3>No Matches Scheduled</h3>
                        <p>Join tournaments to get matches scheduled!</p>
                    </div>
                `;
                return;
            }

            const matchCards = matches.map(match => {
                const scheduledTime = match.scheduledTime?.toDate ? match.scheduledTime.toDate() : new Date(match.scheduledTime);
                const timeString = scheduledTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const dateString = scheduledTime.toLocaleDateString([], { month: 'short', day: 'numeric' });
                
                let statusClass = '';
                let statusText = '';
                
                if (match.status === 'completed') {
                    statusClass = 'text-green-400';
                    statusText = 'Completed';
                } else if (match.status === 'live') {
                    statusClass = 'text-red-400 animate-pulse';
                    statusText = 'Live Now';
                } else {
                    statusClass = 'text-blue-400';
                    statusText = 'Upcoming';
                }

                return `
                    <div class="match-card touch-feedback">
                        <div class="match-header">
                            <div class="match-time">
                                <i class="far fa-clock"></i>
                                <span>${timeString} â€¢ ${dateString}</span>
                            </div>
                            <span class="${statusClass}">${statusText}</span>
                        </div>
                        <div class="match-body">
                            <div class="match-teams">
                                <div class="team">
                                    <div class="team-name">${match.team1 || 'Team A'}</div>
                                    <div class="team-score ${match.winner === match.team1 ? 'winner' : ''}">${match.score1 || 0}</div>
                                </div>
                                <div class="vs">VS</div>
                                <div class="team">
                                    <div class="team-name">${match.team2 || 'Team B'}</div>
                                    <div class="team-score ${match.winner === match.team2 ? 'winner' : ''}">${match.score2 || 0}</div>
                                </div>
                            </div>
                            <div class="match-tournament">
                                <i class="fas fa-trophy"></i>
                                ${match.tournamentName || 'Tournament Match'}
                            </div>
                        </div>
                        <div class="match-footer">
                            <button class="btn btn-sm btn-outline" onclick="dashboard.viewMatchDetails('${match.id}')">
                                <i class="fas fa-eye"></i>
                                Details
                            </button>
                            ${match.status === 'live' ? `
                                <button class="btn btn-sm btn-danger" onclick="dashboard.joinMatch('${match.id}')">
                                    <i class="fas fa-play"></i>
                                    Join Now
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = matchCards;
        }

        renderTransactions() {
            const container = document.getElementById('transactionsList');
            if (!container) return;

            if (transactions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <h3>No Transactions Yet</h3>
                        <p>Your transaction history will appear here</p>
                    </div>
                `;
                return;
            }

            const transactionItems = transactions.map(transaction => {
                const timestamp = transaction.timestamp?.toDate ? transaction.timestamp.toDate() : new Date(transaction.timestamp);
                const timeAgo = this.getTimeAgo(timestamp);
                
                let amountClass = '';
                let amountPrefix = '';
                
                if (transaction.type === 'deposit' || transaction.type === 'winning') {
                    amountClass = 'text-green-400';
                    amountPrefix = '+';
                } else if (transaction.type === 'withdrawal' || transaction.type === 'entry_fee') {
                    amountClass = 'text-red-400';
                    amountPrefix = '-';
                }

                return `
                    <div class="transaction-item">
                        <div class="transaction-icon">
                            <i class="fas fa-${this.getTransactionIcon(transaction.type)}"></i>
                        </div>
                        <div class="transaction-details">
                            <div class="transaction-title">${transaction.description || 'Transaction'}</div>
                            <div class="transaction-meta">
                                <span class="transaction-time">${timeAgo}</span>
                                <span class="transaction-id">#${transaction.id?.substring(0, 8) || 'N/A'}</span>
                            </div>
                        </div>
                        <div class="transaction-amount ${amountClass}">
                            ${amountPrefix}â‚®${transaction.amount?.toLocaleString() || 0}
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = transactionItems;
        }

        // =================== SAMPLE DATA (Fallback) ===================
        loadSampleData() {
            // Sample tournaments
            tournaments = [
                {
                    id: '1',
                    title: 'Valorant Championship',
                    game: 'Valorant',
                    status: 'active',
                    prizePool: 5000,
                    currentPlayers: 32,
                    maxPlayers: 64,
                    description: 'Monthly Valorant championship with cash prizes',
                    startDate: new Date(Date.now() + 3600000) // 1 hour from now
                },
                {
                    id: '2',
                    title: 'CS:GO Open Tournament',
                    game: 'CS:GO',
                    status: 'registering',
                    prizePool: 2500,
                    currentPlayers: 16,
                    maxPlayers: 32,
                    description: 'Open CS:GO tournament for all skill levels',
                    startDate: new Date(Date.now() + 86400000) // 1 day from now
                }
            ];

            // Sample matches
            matches = [
                {
                    id: '1',
                    team1: 'Team Alpha',
                    team2: 'Team Beta',
                    score1: 13,
                    score2: 9,
                    winner: 'Team Alpha',
                    status: 'completed',
                    scheduledTime: new Date(Date.now() - 86400000), // 1 day ago
                    tournamentName: 'Weekly Showdown'
                },
                {
                    id: '2',
                    team1: 'Your Team',
                    team2: 'Team Gamma',
                    score1: 0,
                    score2: 0,
                    status: 'upcoming',
                    scheduledTime: new Date(Date.now() + 7200000), // 2 hours from now
                    tournamentName: 'Daily Challenge'
                }
            ];

            // Sample transactions
            transactions = [
                {
                    id: 'txn_001',
                    type: 'deposit',
                    amount: 100,
                    description: 'Wallet Top-up',
                    timestamp: new Date(Date.now() - 172800000), // 2 days ago
                    status: 'completed'
                },
                {
                    id: 'txn_002',
                    type: 'entry_fee',
                    amount: 20,
                    description: 'Tournament Entry Fee',
                    timestamp: new Date(Date.now() - 86400000), // 1 day ago
                    status: 'completed'
                },
                {
                    id: 'txn_003',
                    type: 'winning',
                    amount: 250,
                    description: 'Tournament Winnings',
                    timestamp: new Date(Date.now() - 43200000), // 12 hours ago
                    status: 'completed'
                }
            ];

            // Render sample data
            this.renderTournaments();
            this.renderMatches();
            this.renderTransactions();
        }

        renderSampleMatches() {
            const container = document.getElementById('matchesList');
            if (!container) return;

            container.innerHTML = `
                <div class="match-card touch-feedback">
                    <div class="match-header">
                        <div class="match-time">
                            <i class="far fa-clock"></i>
                            <span>14:30 â€¢ Today</span>
                        </div>
                        <span class="text-blue-400">Upcoming</span>
                    </div>
                    <div class="match-body">
                        <div class="match-teams">
                            <div class="team">
                                <div class="team-name">Team Alpha</div>
                                <div class="team-score">-</div>
                            </div>
                            <div class="vs">VS</div>
                            <div class="team">
                                <div class="team-name">Team Beta</div>
                                <div class="team-score">-</div>
                            </div>
                        </div>
                        <div class="match-tournament">
                            <i class="fas fa-trophy"></i>
                            Daily Challenge
                        </div>
                    </div>
                    <div class="match-footer">
                        <button class="btn btn-sm btn-outline">
                            <i class="fas fa-eye"></i>
                            Details
                        </button>
                    </div>
                </div>
                
                <div class="match-card touch-feedback">
                    <div class="match-header">
                        <div class="match-time">
                            <i class="far fa-clock"></i>
                            <span>19:00 â€¢ Tomorrow</span>
                        </div>
                        <span class="text-blue-400">Upcoming</span>
                    </div>
                    <div class="match-body">
                        <div class="match-teams">
                            <div class="team">
                                <div class="team-name">Your Team</div>
                                <div class="team-score">-</div>
                            </div>
                            <div class="vs">VS</div>
                            <div class="team">
                                <div class="team-name">Pro Gamers</div>
                                <div class="team-score">-</div>
                            </div>
                        </div>
                        <div class="match-tournament">
                            <i class="fas fa-trophy"></i>
                            Weekly Championship
                        </div>
                    </div>
                    <div class="match-footer">
                        <button class="btn btn-sm btn-outline">
                            <i class="fas fa-eye"></i>
                            Details
                        </button>
                    </div>
                </div>
            `;
        }

        renderSampleTransactions() {
            const container = document.getElementById('transactionsList');
            if (!container) return;

            container.innerHTML = `
                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-arrow-down text-green-500"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Wallet Top-up</div>
                        <div class="transaction-meta">
                            <span class="transaction-time">2 hours ago</span>
                            <span class="transaction-id">#DEP001</span>
                        </div>
                    </div>
                    <div class="transaction-amount text-green-400">
                        +â‚®100
                    </div>
                </div>
                
                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-trophy text-yellow-500"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Tournament Winnings</div>
                        <div class="transaction-meta">
                            <span class="transaction-time">1 day ago</span>
                            <span class="transaction-id">#WIN023</span>
                        </div>
                    </div>
                    <div class="transaction-amount text-green-400">
                        +â‚®250
                    </div>
                </div>
                
                <div class="transaction-item">
                    <div class="transaction-icon">
                        <i class="fas fa-ticket-alt text-red-500"></i>
                    </div>
                    <div class="transaction-details">
                        <div class="transaction-title">Entry Fee</div>
                        <div class="transaction-meta">
                            <span class="transaction-time">2 days ago</span>
                            <span class="transaction-id">#ENT456</span>
                        </div>
                    </div>
                    <div class="transaction-amount text-red-400">
                        -â‚®20
                    </div>
                </div>
            `;
        }

        renderTournamentsError() {
            const container = document.getElementById('tournamentsList');
            if (!container) return;

            container.innerHTML = `
                <div class="error-state">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>Failed to Load Tournaments</h3>
                    <p>Please check your connection and try again</p>
                    <button class="btn btn-primary mt-4" onclick="dashboard.refreshTournaments()">
                        <i class="fas fa-sync-alt mr-2"></i>
                        Try Again
                    </button>
                </div>
            `;
        }

        // =================== TAB MANAGEMENT ===================
        switchTab(tabName) {
            if (this.isLoading) return;
            
            this.currentTab = tabName;
            
            // Update tab buttons
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                    tab.setAttribute('aria-selected', 'true');
                }
            });

            // Update mobile tab indicator
            this.updateTabIndicator();

            // Show/hide tab panels
            const panels = document.querySelectorAll('.tab-panel');
            panels.forEach(panel => {
                panel.classList.remove('active');
                panel.hidden = true;
                if (panel.id === `${tabName}-panel`) {
                    panel.classList.add('active');
                    panel.hidden = false;
                }
            });

            // Update bottom nav
            const bottomNavItems = document.querySelectorAll('.bottom-nav .nav-item');
            bottomNavItems.forEach(item => {
                item.classList.remove('active');
                const text = item.querySelector('.nav-text').textContent;
                if ((tabName === 'profile' && text === 'Profile') ||
                    (tabName === 'tournaments' && text === 'Tourneys')) {
                    item.classList.add('active');
                }
            });

            // Load tab-specific data if needed
            switch(tabName) {
                case 'tournaments':
                    if (tournaments.length === 0) {
                        this.loadTournaments();
                    }
                    break;
                case 'matches':
                    if (matches.length === 0) {
                        this.loadMatches();
                    }
                    break;
                case 'wallet':
                    if (transactions.length === 0) {
                        this.loadTransactions();
                    }
                    break;
                case 'profile':
                    // Profile is already loaded
                    break;
            }

            // Update URL without page reload
            history.replaceState(null, '', `#${tabName}`);
        }

        updateTabIndicator() {
            const indicator = document.getElementById('mobileTabIndicator');
            if (!indicator) return;

            const activeTab = document.querySelector('.tab.active');
            if (activeTab) {
                const rect = activeTab.getBoundingClientRect();
                const parentRect = activeTab.parentElement.getBoundingClientRect();
                
                indicator.style.width = `${rect.width}px`;
                indicator.style.transform = `translateX(${rect.left - parentRect.left}px)`;
                indicator.style.opacity = '1';
            }
        }

        // =================== ACTION HANDLERS ===================
        async handleQuickAction(action) {
            switch(action) {
                case 'Find Tourneys':
                    window.location.href = 'tournaments.html';
                    break;
                case 'Add Funds':
                    this.showDepositModal();
                    break;
                case 'Host Event':
                    if (userData?.role === 'admin') {
                        window.location.href = 'admin.html';
                    } else {
                        this.showNotification('Admin privileges required to host events', 'warning');
                    }
                    break;
                case 'Settings':
                    this.editProfile();
                    break;
            }
        }

        async handleWalletAction(action) {
            switch(action) {
                case 'Instant':
                    this.showDepositModal();
                    break;
                case 'Rewards':
                    this.checkRewards();
                    break;
                case 'History':
                    this.switchTab('wallet');
                    break;
                case 'Settings':
                    window.location.href = 'settings.html?tab=wallet';
                    break;
            }
        }

        async handleProfileAction(action) {
            switch(action.trim()) {
                case 'Edit Profile':
                    this.editProfile();
                    break;
                case 'Verify Email':
                    this.verifyEmail();
                    break;
                case 'Security':
                    this.openSecurity();
                    break;
                case 'Settings':
                    this.openSettings();
                    break;
            }
        }

        // =================== MODAL & NOTIFICATION FUNCTIONS ===================
        showDepositModal() {
            const modalHTML = `
                <div class="modal-overlay active" id="depositModal">
                    <div class="modal">
                        <div class="modal-header">
                            <h3>Add Funds to Wallet</h3>
                            <button class="modal-close" onclick="dashboard.closeModal()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="deposit-options">
                                <div class="amount-options">
                                    <button class="amount-option" data-amount="100">â‚®100</button>
                                    <button class="amount-option" data-amount="250">â‚®250</button>
                                    <button class="amount-option" data-amount="500">â‚®500</button>
                                    <button class="amount-option" data-amount="1000">â‚®1000</button>
                                    <button class="amount-option" data-amount="2000">â‚®2000</button>
                                    <button class="amount-option" data-amount="5000">â‚®5000</button>
                                </div>
                                <div class="custom-amount mt-4">
                                    <label for="customAmount">Or enter custom amount:</label>
                                    <input type="number" id="customAmount" placeholder="Enter amount" min="10" max="10000">
                                </div>
                                <div class="payment-methods mt-6">
                                    <h4>Payment Method</h4>
                                    <div class="method-options">
                                        <label class="method-option active">
                                            <input type="radio" name="paymentMethod" value="upi" checked>
                                            <i class="fab fa-google-pay"></i>
                                            <span>UPI / Google Pay</span>
                                        </label>
                                        <label class="method-option">
                                            <input type="radio" name="paymentMethod" value="card">
                                            <i class="fas fa-credit-card"></i>
                                            <span>Credit/Debit Card</span>
                                        </label>
                                        <label class="method-option">
                                            <input type="radio" name="paymentMethod" value="netbanking">
                                            <i class="fas fa-university"></i>
                                            <span>Net Banking</span>
                                        </label>
                                        <label class="method-option">
                                            <input type="radio" name="paymentMethod" value="paytm">
                                            <i class="fab fa-paypal"></i>
                                            <span>Paytm Wallet</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-secondary" onclick="dashboard.closeModal()">Cancel</button>
                            <button class="btn btn-primary" onclick="dashboard.processDeposit()">Deposit Now</button>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Add event listeners to amount options
            document.querySelectorAll('.amount-option').forEach(option => {
                option.addEventListener('click', (e) => {
                    document.querySelectorAll('.amount-option').forEach(opt => opt.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    document.getElementById('customAmount').value = e.currentTarget.dataset.amount;
                });
            });
        }

        closeModal() {
            const modal = document.querySelector('.modal-overlay.active');
            if (modal) {
                modal.remove();
            }
        }

        showNotification(message, type = 'info') {
            const toast = document.getElementById('notificationToast');
            const toastIcon = document.getElementById('toastIcon');
            const toastMessage = document.getElementById('toastMessage');
            
            if (!toast || !toastIcon || !toastMessage) return;
            
            // Set icon based on type
            let icon = 'â„¹ï¸';
            switch(type) {
                case 'success': icon = 'âœ…'; break;
                case 'error': icon = 'âŒ'; break;
                case 'warning': icon = 'âš ï¸'; break;
            }
            
            toastIcon.textContent = icon;
            toastMessage.textContent = message;
            
            // Show toast
            toast.classList.add('show');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                this.hideNotificationToast();
            }, 5000);
        }

        hideNotificationToast() {
            const toast = document.getElementById('notificationToast');
            if (toast) {
                toast.classList.remove('show');
            }
        }

        showQuickActions() {
            const actions = [
                { icon: 'fa-plus', text: 'Create Team', action: 'createTeam' },
                { icon: 'fa-search', text: 'Find Match', action: 'findMatch' },
                { icon: 'fa-bell', text: 'Notifications', action: 'notifications' },
                { icon: 'fa-qrcode', text: 'Scan QR', action: 'scanQR' }
            ];

            const fabMenu = document.createElement('div');
            fabMenu.className = 'fab-menu';
            fabMenu.innerHTML = actions.map(action => `
                <div class="fab-menu-item" onclick="dashboard.handleFabAction('${action.action}')">
                    <i class="fas ${action.icon}"></i>
                    <span>${action.text}</span>
                </div>
            `).join('');

            document.body.appendChild(fabMenu);
            
            // Remove on outside click
            setTimeout(() => {
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.fab-menu') && !e.target.closest('.fab-button')) {
                        fabMenu.remove();
                    }
                });
            }, 100);
        }

        handleFabAction(action) {
            switch(action) {
                case 'createTeam':
                    this.showNotification('Team creation feature coming soon!', 'info');
                    break;
                case 'findMatch':
                    this.switchTab('tournaments');
                    break;
                case 'notifications':
                    this.showNotification('You have ' + (notifications.length || 0) + ' unread notifications', 'info');
                    break;
                case 'scanQR':
                    this.showNotification('QR scanner feature coming soon!', 'info');
                    break;
            }
            
            // Remove fab menu
            const fabMenu = document.querySelector('.fab-menu');
            if (fabMenu) fabMenu.remove();
        }

        // =================== TOURNAMENT FUNCTIONS ===================
        async joinTournament(tournamentId) {
            try {
                if (!currentUser) {
                    this.showNotification('Please login to join tournaments', 'error');
                    return;
                }

                // Check if user has enough balance
                const tournament = tournaments.find(t => t.id === tournamentId);
                if (tournament?.entryFee > (userData?.balance || 0)) {
                    this.showNotification('Insufficient balance. Please add funds.', 'error');
                    this.showDepositModal();
                    return;
                }

                // Add user to tournament participants
                await db.collection('tournaments').doc(tournamentId).update({
                    participants: firebase.firestore.FieldValue.arrayUnion(currentUser.uid),
                    currentPlayers: firebase.firestore.FieldValue.increment(1)
                });

                // Deduct entry fee from user balance
                if (tournament.entryFee > 0) {
                    await db.collection('users').doc(currentUser.uid).update({
                        balance: firebase.firestore.FieldValue.increment(-tournament.entryFee)
                    });

                    // Record transaction
                    await db.collection('transactions').add({
                        userId: currentUser.uid,
                        type: 'entry_fee',
                        amount: tournament.entryFee,
                        description: `Entry fee for ${tournament.title}`,
                        tournamentId: tournamentId,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                        status: 'completed'
                    });
                }

                this.showNotification('Successfully joined tournament!', 'success');
                
                // Refresh tournaments list
                await this.loadTournaments();
                
                // Update user stats
                await this.loadUserStats();

            } catch (error) {
                console.error('Error joining tournament:', error);
                this.showNotification('Failed to join tournament', 'error');
            }
        }

        viewTournament(tournamentId) {
            window.location.href = `tournament-details.html?id=${tournamentId}`;
        }

        refreshTournaments() {
            this.showNotification('Refreshing tournaments...', 'info');
            this.loadTournaments();
        }

        // =================== MATCH FUNCTIONS ===================
        viewMatchDetails(matchId) {
            this.showNotification('Match details feature coming soon!', 'info');
        }

        joinMatch(matchId) {
            this.showNotification('Joining match...', 'info');
            // Implement actual match joining logic
        }

        // =================== WALLET FUNCTIONS ===================
        async processDeposit() {
            try {
                const customAmountInput = document.getElementById('customAmount');
                const amount = parseFloat(customAmountInput?.value) || 0;
                
                if (amount < 10) {
                    this.showNotification('Minimum deposit amount is â‚®10', 'error');
                    return;
                }

                if (amount > 10000) {
                    this.showNotification('Maximum deposit amount is â‚®10,000', 'error');
                    return;
                }

                // Create deposit record
                const depositRef = await db.collection('deposits').add({
                    userId: currentUser.uid,
                    amount: amount,
                    status: 'pending',
                    method: document.querySelector('input[name="paymentMethod"]:checked')?.value || 'upi',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                // In a real app, this would redirect to payment gateway
                // For demo, simulate successful payment after 2 seconds
                this.showNotification('Processing payment...', 'info');
                
                setTimeout(async () => {
                    try {
                        // Update deposit status
                        await db.collection('deposits').doc(depositRef.id).update({
                            status: 'approved',
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });

                        // Update user balance
                        await db.collection('users').doc(currentUser.uid).update({
                            balance: firebase.firestore.FieldValue.increment(amount)
                        });

                        // Record transaction
                        await db.collection('transactions').add({
                            userId: currentUser.uid,
                            type: 'deposit',
                            amount: amount,
                            description: 'Wallet Deposit',
                            referenceId: depositRef.id,
                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                            status: 'completed'
                        });

                        this.closeModal();
                        this.showNotification(`Successfully deposited â‚®${amount}`, 'success');
                        
                        // Refresh wallet data
                        await Promise.all([
                            this.loadUserData(),
                            this.loadTransactions()
                        ]);

                    } catch (error) {
                        console.error('Error processing deposit:', error);
                        this.showNotification('Error processing deposit', 'error');
                    }
                }, 2000);

            } catch (error) {
                console.error('Error initiating deposit:', error);
                this.showNotification('Error initiating deposit', 'error');
            }
        }

        checkRewards() {
            this.showNotification('Checking for available rewards...', 'info');
            // Implement rewards check logic
        }

        viewAllTransactions() {
            window.location.href = 'wallet.html?tab=history';
        }

        // =================== PROFILE FUNCTIONS ===================
        editProfile() {
            window.location.href = 'profile.html';
        }

        async verifyEmail() {
            try {
                await currentUser.sendEmailVerification();
                this.showNotification('Verification email sent! Please check your inbox.', 'success');
            } catch (error) {
                console.error('Error sending verification email:', error);
                this.showNotification('Error sending verification email', 'error');
            }
        }

        openSecurity() {
            window.location.href = 'settings.html?tab=security';
        }

        openSettings() {
            window.location.href = 'settings.html';
        }

        changeAvatar() {
            this.showNotification('Avatar change feature coming soon!', 'info');
        }

        // =================== REAL-TIME UPDATES ===================
        setupRealTimeListeners() {
            if (!currentUser) return;

            // User data listener
            const userListener = db.collection('users').doc(currentUser.uid)
                .onSnapshot((doc) => {
                    if (doc.exists) {
                        userData = { id: doc.id, ...doc.data() };
                        this.updateUserUI(userData);
                        this.updateDashboardStats();
                    }
                });

            // Tournament updates listener
            const tournamentListener = db.collection('tournaments')
                .where('status', 'in', ['active', 'upcoming', 'registering'])
                .onSnapshot((snapshot) => {
                    if (this.currentTab === 'tournaments') {
                        this.loadTournaments();
                    }
                });

            // Match updates listener
            const matchListener = db.collection('matches')
                .where('participants', 'array-contains', currentUser.uid)
                .onSnapshot((snapshot) => {
                    if (this.currentTab === 'matches') {
                        this.loadMatches();
                    }
                });

            // Notification listener
            const notificationListener = db.collection('notifications')
                .where('userId', '==', currentUser.uid)
                .where('read', '==', false)
                .onSnapshot((snapshot) => {
                    notifications = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    this.updateNotificationBadge(notifications.length);
                });

            // Store listeners for cleanup
            this.realTimeListeners = [userListener, tournamentListener, matchListener, notificationListener];
        }

        startBackgroundUpdates() {
            // Update last active every minute
            this.notificationInterval = setInterval(() => {
                if (currentUser) {
                    db.collection('users').doc(currentUser.uid).update({
                        lastActive: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
            }, 60000);
        }

        // =================== UTILITY FUNCTIONS ===================
        showLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            const mainContent = document.getElementById('mainContent');
            
            if (loadingScreen) {
                loadingScreen.style.display = 'flex';
                
                // Simulate loading progress
                const progressBar = document.getElementById('loadingProgress');
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 20;
                    if (progress > 90) {
                        clearInterval(interval);
                        progressBar.style.width = '100%';
                    } else {
                        progressBar.style.width = `${progress}%`;
                    }
                }, 200);
            }
            
            if (mainContent) {
                mainContent.classList.add('critical-hidden');
            }
        }

        hideLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            const mainContent = document.getElementById('mainContent');
            
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
            
            if (mainContent) {
                mainContent.classList.remove('critical-hidden');
            }
        }

        setLoadingState(elementId, loading) {
            const element = document.getElementById(elementId);
            if (!element) return;

            if (loading) {
                element.classList.add('loading');
            } else {
                element.classList.remove('loading');
            }
        }

        updateNotificationBadge(count) {
            const badge = document.querySelector('#mobileNotifications .absolute:not(.animate-ping)');
            if (badge) {
                badge.style.display = count > 0 ? 'block' : 'none';
            }
        }

        getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            
            let interval = seconds / 31536000;
            if (interval > 1) return Math.floor(interval) + ' years ago';
            
            interval = seconds / 2592000;
            if (interval > 1) return Math.floor(interval) + ' months ago';
            
            interval = seconds / 86400;
            if (interval > 1) return Math.floor(interval) + ' days ago';
            
            interval = seconds / 3600;
            if (interval > 1) return Math.floor(interval) + ' hours ago';
            
            interval = seconds / 60;
            if (interval > 1) return Math.floor(interval) + ' minutes ago';
            
            return 'just now';
        }

        getTransactionIcon(type) {
            const icons = {
                deposit: 'arrow-down',
                withdrawal: 'arrow-up',
                winning: 'trophy',
                entry_fee: 'ticket-alt',
                refund: 'undo',
                bonus: 'gift'
            };
            return icons[type] || 'exchange-alt';
        }

        handleResize() {
            this.initializeMobileDetection();
        }

        handleKeyboardShortcuts(e) {
            // Don't trigger if user is typing in an input
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

            switch(e.key.toLowerCase()) {
                case '1':
                    this.switchTab('tournaments');
                    break;
                case '2':
                    this.switchTab('matches');
                    break;
                case '3':
                    this.switchTab('wallet');
                    break;
                case '4':
                    this.switchTab('profile');
                    break;
                case 'r':
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        this.refreshTournaments();
                    }
                    break;
                case 'f':
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        const searchInput = document.getElementById('globalSearch');
                        if (searchInput) searchInput.focus();
                    }
                    break;
                case 'escape':
                    this.closeModal();
                    this.hideNotificationToast();
                    break;
            }
        }

        async signOut() {
            try {
                await auth.signOut();
                this.showNotification('Signed out successfully', 'success');
                window.location.href = 'index.html';
            } catch (error) {
                console.error('Error signing out:', error);
                this.showNotification('Error signing out', 'error');
            }
        }

        cleanup() {
            // Clear intervals
            if (this.notificationInterval) {
                clearInterval(this.notificationInterval);
            }

            // Unsubscribe from real-time listeners
            this.realTimeListeners.forEach(unsubscribe => {
                if (typeof unsubscribe === 'function') {
                    unsubscribe();
                }
            });

            // Update last active before leaving
            if (currentUser) {
                db.collection('users').doc(currentUser.uid).update({
                    lastActive: firebase.firestore.FieldValue.serverTimestamp()
                });
            }
        }

        // ADDED: Missing methods referenced in HTML
        viewTournaments() {
            this.switchTab('tournaments');
        }

        viewProfile() {
            this.switchTab('profile');
        }

        showMoreActions() {
            this.showNotification('More actions coming soon!', 'info');
        }
    }

    // Initialize dashboard when page loads
    let dashboard;
    document.addEventListener('DOMContentLoaded', () => {
        dashboard = new Dashboard();
    });

    // Make dashboard available globally for inline event handlers
    window.dashboard = dashboard;

    // Helper functions for inline event handlers
    window.switchTab = (tabName) => {
        if (dashboard) dashboard.switchTab(tabName);
    };

    window.refreshTournaments = () => {
        if (dashboard) dashboard.refreshTournaments();
    };

    window.signOut = () => {
        if (dashboard) dashboard.signOut();
    };

    window.viewAllTransactions = () => {
        if (dashboard) dashboard.viewAllTransactions();
    };
</script>

<!-- No-JS Fallback -->
<noscript>
    <style>
        .no-js-warning {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0f0f23;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 20px;
        }
        
        .no-js-content {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 2rem;
            max-width: 400px;
            text-align: center;
        }
        
        .no-js-content h2 {
            color: #ef4444;
            margin-bottom: 1rem;
        }
        
        .no-js-content p {
            color: #9ca3af;
            margin-bottom: 1.5rem;
        }
    </style>
    <div class="no-js-warning">
        <div class="no-js-content">
            <h2>JavaScript Required</h2>
            <p>This dashboard requires JavaScript to function properly. Please enable JavaScript in your browser settings.</p>
            <p class="text-sm text-text-muted">Some basic features may work without JavaScript, but the full experience requires it.</p>
        </div>
    </div>
</noscript>
</body> </html> 