<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Dashboard â€” TourneyHub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-content">
      <div class="loading-logo">
        <span class="logo-icon">ğŸ†</span>
        <span class="logo-text">TourneyHub</span>
      </div>
      <div class="loading-spinner"></div>
      <div class="loading-subtitle">Loading Your Arena...</div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="dashboard-container" id="mainContent">
    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-container">
        <div class="header-left">
          <div class="logo">
            <span class="logo-icon">ğŸ†</span>
            <span class="logo-text">TourneyHub</span>
          </div>
        </div>
        <div class="header-right">
          <div class="user-info" id="userInfo">
            <div class="user-avatar">
              <span class="avatar-icon">ğŸ‘¤</span>
            </div>
            <div class="user-details">
              <div class="user-name" id="userName">Loading...</div>
              <div class="user-email" id="userEmail">user@example.com</div>
            </div>
          </div>
          <button class="btn btn-ghost btn-signout" id="signOutBtn">
            <span class="btn-icon">ğŸšª</span>
            Sign Out
          </button>
        </div>
      </div>
    </header>

    <!-- Stats Overview -->
    <section class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ®</div>
          <div class="stat-info">
            <div class="stat-number" id="tournamentsJoined">0</div>
            <div class="stat-label">Tournaments Joined</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ†</div>
          <div class="stat-info">
            <div class="stat-number" id="tournamentsWon">0</div>
            <div class="stat-label">Tournaments Won</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ’°</div>
          <div class="stat-info">
            <div class="stat-number" id="walletBalance">ğŸ’0</div>
            <div class="stat-label">Wallet Balance</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">â­</div>
          <div class="stat-info">
            <div class="stat-number" id="winRate">0%</div>
            <div class="stat-label">Win Rate</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Actions -->
    <section class="quick-actions">
      <h2 class="section-title">Quick Actions</h2>
      <div class="actions-grid">
        <a href="tournaments.html" class="action-card">
          <div class="action-icon">ğŸ¯</div>
          <div class="action-text">Find Tournaments</div>
          <div class="action-subtext">Join new competitions</div>
        </a>
        <a href="wallet.html" class="action-card">
          <div class="action-icon">ğŸ’³</div>
          <div class="action-text">Add Funds</div>
          <div class="action-subtext">Top up your wallet</div>
        </a>
        <a href="admin.html" class="action-card">
          <div class="action-icon">âš¡</div>
          <div class="action-text">Host Tournament</div>
          <div class="action-subtext">Create your own</div>
        </a>
        <div class="action-card" id="profileSettings">
          <div class="action-icon">ğŸ‘¤</div>
          <div class="action-text">Profile Settings</div>
          <div class="action-subtext">Manage your account</div>
        </div>
      </div>
    </section>

    <!-- Tab Navigation -->
    <nav class="tab-navigation">
      <div class="tab-list" role="tablist">
        <button class="tab active" data-tab="tournaments">
          <span class="tab-icon">ğŸ®</span>
          <span class="tab-text">My Tournaments</span>
        </button>
        <button class="tab" data-tab="matches">
          <span class="tab-icon">âš”ï¸</span>
          <span class="tab-text">My Matches</span>
        </button>
        <button class="tab" data-tab="wallet">
          <span class="tab-icon">ğŸ’°</span>
          <span class="tab-text">Wallet</span>
        </button>
        <button class="tab" data-tab="profile">
          <span class="tab-icon">ğŸ‘¤</span>
          <span class="tab-text">Profile</span>
        </button>
      </div>
    </nav>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Tournaments Tab -->
      <div class="tab-panel active" id="tournaments-panel">
        <div class="panel-header">
          <h3>My Tournament Registrations</h3>
          <button class="btn btn-primary btn-sm" onclick="refreshTournaments()">
            <span class="btn-icon">ğŸ”„</span>
            Refresh
          </button>
        </div>
        <div class="tournaments-list" id="tournamentsList">
          <div class="loading-state">
            <div class="loading-spinner-small"></div>
            <p>Loading your tournaments...</p>
          </div>
        </div>
      </div>

      <!-- Matches Tab -->
      <div class="tab-panel" id="matches-panel">
        <div class="panel-header">
          <h3>Upcoming & Recent Matches</h3>
        </div>
        <div class="matches-list" id="matchesList">
          <div class="empty-state">
            <div class="empty-icon">âš”ï¸</div>
            <h4>No Matches Yet</h4>
            <p>Join a tournament to see your matches here</p>
            <a href="tournaments.html" class="btn btn-primary">Find Tournaments</a>
          </div>
        </div>
      </div>

      <!-- Wallet Tab -->
      <div class="tab-panel" id="wallet-panel">
        <div class="panel-header">
          <h3>Wallet Overview</h3>
          <a href="wallet.html" class="btn btn-primary btn-sm">
            <span class="btn-icon">ğŸ’°</span>
            Manage Wallet
          </a>
        </div>
        <div class="wallet-content" id="walletContent">
          <div class="wallet-card">
            <div class="wallet-balance">
              <div class="balance-label">Available Balance</div>
              <div class="balance-amount" id="detailedBalance">ğŸ’0.00</div>
              <div class="balance-subtitle">Total withdrawable funds</div>
            </div>
            <div class="wallet-actions">
              <a href="wallet.html?tab=deposit" class="btn btn-primary btn-sm">
                <span class="btn-icon">â¬‡ï¸</span>
                Deposit
              </a>
              <a href="wallet.html?tab=withdraw" class="btn btn-secondary btn-sm">
                <span class="btn-icon">â¬†ï¸</span>
                Withdraw
              </a>
            </div>
          </div>
          
          <div class="transaction-history">
            <h4>Recent Transactions</h4>
            <div class="transactions-list" id="transactionsList">
              <div class="empty-state">
                <div class="empty-icon">ğŸ’¸</div>
                <p>No transactions yet</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Tab -->
      <div class="tab-panel" id="profile-panel">
        <div class="panel-header">
          <h3>Profile Settings</h3>
        </div>
        <div class="profile-content" id="profileContent">
          <div class="profile-card">
            <div class="profile-header">
              <div class="profile-avatar-large">
                <span class="avatar-icon-large">ğŸ‘¤</span>
              </div>
              <div class="profile-info">
                <h4 id="profileName">Loading...</h4>
                <p class="profile-email" id="profileEmail">user@example.com</p>
                <div class="profile-badges">
                  <span class="badge verified" id="verifiedBadge">âœ“ Verified</span>
                  <span class="badge member" id="memberSince">Member since 2024</span>
                </div>
              </div>
            </div>
            
            <div class="profile-stats">
              <div class="profile-stat">
                <div class="stat-value" id="profileTournaments">0</div>
                <div class="stat-label">Tournaments</div>
              </div>
              <div class="profile-stat">
                <div class="stat-value" id="profileWins">0</div>
                <div class="stat-label">Wins</div>
              </div>
              <div class="profile-stat">
                <div class="stat-value" id="profileWinRate">0%</div>
                <div class="stat-label">Win Rate</div>
              </div>
            </div>

            <div class="profile-actions">
              <button class="btn btn-secondary" onclick="editProfile()">
                <span class="btn-icon">âœï¸</span>
                Edit Profile
              </button>
              <button class="btn btn-ghost" onclick="verifyEmail()">
                <span class="btn-icon">ğŸ“§</span>
                Verify Email
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <!-- ULTRA GAMERX BOTTOM NAV -->
  <nav class="bottom-nav">
    <a href="tournaments.html" class="nav-item">
        <span class="nav-icon">âš”ï¸</span>
        <span class="nav-text">Tourneys</span>
    </a>
    <a href="games.html" class="nav-item">
        <span class="nav-icon">ğŸ®</span>
        <span class="nav-text">Games</span>
    </a>
    <a href="index.html" class="nav-item">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-text">Home</span>
    </a>
    <a href="leaderboards.html" class="nav-item">
        <span class="nav-icon">ğŸ†</span>
        <span class="nav-text">Rankings</span>
    </a>
    <a href="profile.html" class="nav-item active">
        <span class="nav-icon">ğŸ‘‘</span>
        <span class="nav-text">Pro</span>
    </a>
    </nav>

  <!-- Notification Toast -->
  <div class="notification-toast" id="notificationToast">
    <div class="toast-content">
      <span class="toast-icon" id="toastIcon">âš ï¸</span>
      <span class="toast-message" id="toastMessage"></span>
    </div>
    <button class="toast-close" id="toastClose">Ã—</button>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>

  <!-- Dashboard JS -->
  <script src="dashboard.js"></script>

  <script>
    // Enhanced bottom nav interaction and animations
    document.addEventListener('DOMContentLoaded', function() {
      // Bottom nav active state
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => {
        item.addEventListener('click', function(e) {
          navItems.forEach(nav => nav.classList.remove('active'));
          this.classList.add('active');
          this.style.transform = 'scale(0.95)';
          setTimeout(() => { this.style.transform = ''; }, 150);
        });
      });

      // Button click feedback
      document.addEventListener('click', function(e) {
        if (e.target.closest('.btn')) {
          const btn = e.target.closest('.btn');
          btn.style.transform = 'scale(0.98)';
          setTimeout(() => { btn.style.transform = ''; }, 150);
        }
      });

      // Prevent context menu on interactive elements
      document.addEventListener('contextmenu', function(e) {
        if (e.target.closest('.btn') || e.target.closest('.nav-item') || e.target.closest('a')) {
          e.preventDefault();
        }
      });

      // Touch device optimizations
      if ('ontouchstart' in window) {
        document.body.classList.add('touch-device');
        document.addEventListener('touchstart', function() {}, { passive: true });
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
          const now = (new Date()).getTime();
          if (now - lastTouchEnd <= 300) {
            event.preventDefault();
          }
          lastTouchEnd = now;
        }, false);
      }

      // Show Organizer nav only for admins
      // Replace this with your actual admin check logic
      function isAdmin() {
        // Example: check localStorage, cookie, or Firebase user role
        // return true if user is admin
        // For demo, set to false; replace with real check
        return localStorage.getItem('isAdmin') === 'true';
      }
      const organizerNav = document.getElementById('organizerNav');
      if (organizerNav) {
        if (isAdmin()) {
          organizerNav.style.display = '';
        } else {
          organizerNav.style.display = 'none';
        }
      }
    });
  </script>
</body>
</html>
