<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Games Library - TourneyHub</title>
  <link rel="stylesheet" href="index.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <style>
    /* Optional visual polish â€” add fade transition and cards */
    .game-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 16px;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .game-card:hover {
      transform: translateY(-6px);
      background: rgba(255, 255, 255, 0.06);
    }
    .game-icon {
      font-size: 2rem;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      color: #fff;
    }
    .status-live {
      color: #4ade80;
      font-weight: 600;
    }
    .status-upcoming {
      color: #fbbf24;
      font-weight: 600;
    }
    .loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.4s ease;
    }
  </style>
</head>
<body class="no-select">
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-content">
      <div class="loading-logo">
        <span class="logo-icon">ğŸ®</span>
        <span class="logo-text">TourneyHub</span>
      </div>
      <div class="loading-spinner"></div>
      <p class="loading-subtitle">Loading games library...</p>
    </div>
  </div>

  <!-- Header -->
  <header class="main-header" id="mainHeader">
    <div class="header-container">
      <a href="index.html" class="logo">
        <span class="logo-icon">ğŸ†</span>
        <span class="logo-text">TourneyHub</span>
      </a>

      <nav class="header-nav">
        <a href="tournaments.html" class="nav-link">Tournaments</a>
        <a href="games.html" class="nav-link active">Games</a>
        <a href="leaderboards.html" class="nav-link">Leaderboards</a>
        <a href="how-to-play.html" class="nav-link">How to Play</a>
      </nav>

      <div class="auth-buttons">
        <a href="login.html" class="btn btn-secondary">Login</a>
        <a href="register.html" class="btn btn-primary">Sign Up</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero-section" style="min-height:60vh;padding:100px 16px 60px;">
    <div class="hero-glow"></div>
    <div class="hero-container">
      <div class="hero-badge">
        <span>ğŸ®</span><span>Game Library</span>
      </div>
      <h1 class="hero-title">
        Choose Your <span class="gradient-text">Battlefield</span>
      </h1>
      <p class="hero-description">
        Select your favorite game to view current and upcoming tournaments.
        Compete and earn real prizes every day!
      </p>
    </div>
  </section>

  <!-- Games section -->
  <section class="trending-section">
    <div class="section-header">
      <h2 class="section-title"><span class="fire-icon">ğŸ”¥</span> Games</h2>
    </div>

    <div class="tournaments-grid" id="gamesGrid">
      <div class="loading-tournaments">
        <div class="loading-spinner"></div>
        <p>Loading games...</p>
      </div>
    </div>
  </section>

  <!-- Platform Stats -->
  <section class="features-section">
    <div class="section-header center">
      <h2 class="section-title">ğŸ“Š Platform Statistics</h2>
      <p class="section-subtitle">
        Join thousands of skilled gamers already playing on TourneyHub
      </p>
    </div>

    <div
      class="hero-stats"
      style="justify-content: center; gap: 3rem; flex-wrap: wrap"
    >
      <div class="stat">
        <div class="stat-number">50K+</div>
        <div class="stat-label">Players</div>
      </div>
      <div class="stat">
        <div class="stat-number">â‚¹50L+</div>
        <div class="stat-label">Prize Money</div>
      </div>
      <div class="stat">
        <div class="stat-number">1K+</div>
        <div class="stat-label">Tournaments</div>
      </div>
    </div>
  </section>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="tournaments.html" class="nav-item"
      ><span class="nav-icon">âš”ï¸</span><span class="nav-text">Tourneys</span></a
    >
    <a href="games.html" class="nav-item active"
      ><span class="nav-icon">ğŸ®</span><span class="nav-text">Games</span></a
    >
    <a href="index.html" class="nav-item"
      ><span class="nav-icon">ğŸ </span><span class="nav-text">Home</span></a
    >
    <a href="wallet.html" class="nav-item"
      ><span class="nav-icon">ğŸ’°</span><span class="nav-text">Wallet</span></a
    >
    <a href="dashboard.html" class="nav-item"
      ><span class="nav-icon">ğŸ‘‘</span><span class="nav-text">Pro</span></a
    >
  </nav>

  <!-- Firebase & JS -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA7QsyV2yb4f_acY9ETQnTSna7YHxwOJw4",
      authDomain: "authapp-386ee.firebaseapp.com",
      projectId: "authapp-386ee",
      storageBucket: "authapp-386ee.appspot.com",
      messagingSenderId: "809698525310",
      appId: "1:809698525310:web:5cb7de80bde9ed1f26982f",
      measurementId: "G-EJZTSBSGQT",
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const games = [
      { id: "BGMI", icon: "ğŸ“±", color: "#ff6b35", desc: "Battle royale on mobile." },
      { id: "Free Fire", icon: "ğŸ”¥", color: "#ffd93d", desc: "Fast 10â€‘minute battles." },
      { id: "Call of Duty", icon: "ğŸ¯", color: "#6bc7ff", desc: "Console FPS on mobile." },
      { id: "Clash Royale", icon: "ğŸ‘‘", color: "#ff96b7", desc: "Card duel arena." },
      { id: "8 Ball Pool", icon: "ğŸ±", color: "#4ecdc4", desc: "Classic pool legend." },
      { id: "Valorant", icon: "ğŸ­", color: "#ff4655", desc: "PC tactical shooter." },
    ];

    async function loadGames() {
      const grid = document.getElementById("gamesGrid");
      try {
        const snap = await db
          .collection("tournaments")
          .where("status", "in", ["active", "upcoming", "registering"])
          .get();
        const counts = {};
        snap.forEach((doc) => {
          const g = doc.data().game;
          if (g) counts[g] = (counts[g] || 0) + 1;
        });
        renderGames(counts);
      } catch (e) {
        console.error(e);
        renderGames({});
      }
    }

    function renderGames(counts) {
      const grid = document.getElementById("gamesGrid");
      grid.innerHTML = games
        .map((g) => {
          const active = counts[g.id] || 0;
          return `
          <div class="game-card" onclick="selectGame('${g.id}')">
            <div class="tournament-header">
              <div class="tournament-game">
                <div class="game-icon" style="background:${g.color};">${g.icon}</div>
                <div>
                  <div class="game-name">${g.id}</div>
                  <div class="game-category">Mobile/PC Game</div>
                </div>
              </div>
              <div class="tournament-status ${
                active > 0 ? "status-live" : "status-upcoming"
              }">${active} Live</div>
            </div>
            <div class="tournament-body">
              <p>${g.desc}</p>
            </div>
            <div class="tournament-footer">
              <button class="btn btn-sm ${
                active > 0 ? "btn-register" : "btn-secondary"
              }">${active > 0 ? "View Tournaments" : "Coming Soon"}</button>
            </div>
          </div>`;
        })
        .join("");
    }

    function selectGame(game) {
      window.location.href = `tournament.html?game=${encodeURIComponent(game)}`;
    }

    // startup
    document.addEventListener("DOMContentLoaded", () => {
      const loading = document.getElementById("loadingScreen");
      setTimeout(() => loading && loading.classList.add("hidden"), 1000);
      loadGames();

      const header = document.getElementById("mainHeader");
      window.addEventListener("scroll", () =>
        window.scrollY > 50
          ? header.classList.add("scrolled")
          : header.classList.remove("scrolled")
      );
    });
  </script>
</body>
</html>